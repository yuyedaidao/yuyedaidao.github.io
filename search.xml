<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[IBInspectableæ— æ³•å–å€¼çš„é—®é¢˜]]></title>
    <url>%2F2018%2F11%2F09%2FIBInspectable%E6%97%A0%E6%B3%95%E5%8F%96%E5%80%BC%E7%9A%84%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[æˆ‘åœ¨xibæ–‡ä»¶é‡Œç”¨äº†IBInspectableç„¶åŽåœ¨UIViewçš„layoutSubviewsé‡Œæ‰§è¡Œ dispatch_async(dispatch_get_main_queue(), ^{ //some code} ç«Ÿç„¶å–ä¸åˆ°ç›¸åº”IBInspectableæ ‡è®°çš„å€¼ï¼Œå¦‚æžœåœ¨blockçš„å¤–è¾¹é‡æ–°å£°æ˜Žæ–°çš„å˜é‡å¹¶èµ‹å€¼æ‰å¯ä»¥å¦‚å›¾ï¼š å¥‡æ€ªçš„é—®é¢˜ï¼Œç‰¹æ­¤è®°å½•]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>GCD</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[WCSession-sendMessage-å¤±è´¥å¤„ç†]]></title>
    <url>%2F2018%2F11%2F09%2FWCSession-sendMessage-%E5%A4%B1%E8%B4%A5%E5%A4%84%E7%90%86%2F</url>
    <content type="text"><![CDATA[é€šè¿‡æ‰‹è¡¨å‘æ‰‹æœºç«¯å‘é€æ¶ˆæ¯æ—¶å‡ºçŽ°Payload could not be delivered(ä¸­æ–‡çŽ¯å¢ƒä¸‹:æœªèƒ½ä¼ é€è´Ÿè½½)çš„é”™è¯¯æç¤º,å¦‚æžœä½ ä¿è¯ä½ çš„è®¾ç½®éƒ½å¯¹çš„æƒ…å†µä¸‹,è¯·è®°å¾—æ£€æŸ¥æ‰‹æœºç«¯WCSessionå®žçŽ°çš„ä»£ç†æ–¹æ³•å…¨ä¸å…¨ å¦‚æžœä½ æ˜¯è¿™æ ·å‘é€æ¶ˆæ¯ session.sendMessage([&quot;request&quot; : &quot;list&quot;], replyHandler: nil, errorHandler: { (error) in print(error)}) é‚£ä¹ˆåœ¨æ‰‹æœºç«¯ä½ è¦æœ‰è¿™æ ·çš„ä»£ç†æ–¹æ³• public func session(_ session: WCSession, didReceiveMessage message: [String : Any]) å¦‚æžœä½ æ˜¯è¿™æ ·å‘é€æ¶ˆæ¯ session.sendMessage([&quot;request&quot; : &quot;list&quot;], replyHandler: { (result) in print(result) }, errorHandler: { (error) in print(error) }) é‚£ä¹ˆåœ¨æ‰‹æœºç«¯ä½ è¦æœ‰è¿™æ ·çš„ä»£ç†æ–¹æ³• public func session(_ session: WCSession, didReceiveMessage message: [String : Any], replyHandler: @escaping ([String : Any]) -&gt; Swift.Void) æ ¹æ®å‘é€æ—¶æœ‰æ²¡æœ‰replyHandleræ¥å†³å®šè°ƒç”¨å“ªä¸ªä»£ç†æ–¹æ³•,å¦‚æžœä¸åŒ¹é…å°±ä¼šå‘é€å¤±è´¥]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>exception</tag>
        <tag>iOS</tag>
        <tag>watch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[VSä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–å¯¼è‡´ejsç¼–è¯‘é”™è¯¯]]></title>
    <url>%2F2018%2F11%2F09%2FVS%E4%BF%9D%E5%AD%98%E6%97%B6%E8%87%AA%E5%8A%A8%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%AF%BC%E8%87%B4ejs%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%2F</url>
    <content type="text"><![CDATA[ejsæ¨¡æ¿å¼•æ“Žä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰å¥½çš„æ ¼å¼åŒ–æ’ä»¶,æœ‰çš„è¯,æ±‚ä¸€ä¸ªæœ€è¿‘é‡åˆ°ä¸€ä¸ªejsè§£æžçš„é—®é¢˜,éžå¸¸å°å¿ƒçš„å†™å¥½ejsæ–‡ä»¶,ä¸€è¿è¡Œå‡ºäº†é”™,å¦‚ä¸‹12345678Invalid or unexpected token in /Users/wang/Desktop/Work/Node/nobook/views/web-index.ejs while compiling ejs If the above error is not helpful, you may want to try EJS-Lint: https://github.com/RyanZim/EJS-LintSyntaxError: Invalid or unexpected token in /Users/wang/Desktop/Work/Node/nobook/views/web-index.ejs while compiling ejsIf the above error is not helpful, you may want to try EJS-Lint:https://github.com/RyanZim/EJS-Lint at new Function (&lt;anonymous&gt;)... å®Œå…¨çœ‹ä¸åˆ°æœ‰ç”¨çš„ä¿¡æ¯,shit äºŽæ˜¯æˆ‘å°±æŒ‰æç¤ºç”¨ https://github.com/RyanZim/EJS-Lint æ¥è¯•è¯•èƒ½ä¸èƒ½çœ‹åˆ°æ›´å¤šä¿¡æ¯â€¦å¿ƒç´¯å•Š,ç”¨å‘½ä»¤å·æ‰§è¡Œç›´æŽ¥è¿”å›žäº†æ²¡æœ‰ä»»ä½•ä¿¡æ¯.åŠ åœ¨å·¥ç¨‹é‡Œè¿”å›žundefined, MMP.å§¿åŠ¿ä¸å¯¹?æœ‰æŽŒæ¡åŠ¨ä½œè¦é¢†çš„è¯·æŒ‡æ•™. åœ¨æŠ˜ç£¨äº†æŽ¥è¿‘ä¸¤å¤©çš„æ—¶é—´åŽæˆ‘ä¸å¾—å¯¹æˆ‘æŽ¥è¿‘åƒè¡Œçš„ejsæ–‡ä»¶ä¸€è¡Œè¡Œejsä»£ç è¿›è¡ŒæŸ¥çœ‹,è¿˜æ˜¯æ²¡é”™å•Šâ€¦è¦ä½ ä½ èƒ½ä¸å´©æºƒ? æœ€æœ€åŽ,æˆ‘å°±é‡æ–°æŠŠå¸¦æœ‰ejsä»£ç çš„ç‰‡æ®µä¸€æ®µæ®µæ‘˜å‡ºæ¥,ç„¶åŽä¸€éééƒ¨ç½²è¿è¡Œ,ç»ˆäºŽâ€¦è‹å¤©å•Š. 1&lt;a href=&quot;javascript:void(0)&quot; onclick=&lt;%- &apos;\&apos;deleteAlert( &quot;&apos;+ item.name + &apos;&quot;, &quot;&apos; + item._id + &apos;&quot;) \ &apos;&apos; %&gt; å¦‚ä¸Šè¿™å°±æ˜¯é—®é¢˜ä»£ç ,ä¼°è®¡å†ç»†å¿ƒä½ å¯èƒ½ä¹Ÿæ²¡æ³•å¾ˆå¤šå‘çŽ°é—®é¢˜å§â€¦å…¶å®žæˆ‘çš„åŽŸå§‹ä»£ç æ˜¯1&lt;a href=&quot;javascript:void(0)&quot; onclick=&lt;%- &apos;\&apos;deleteAlert( &quot;&apos;+ item.name + &apos;&quot;, &quot;&apos; + item._id + &apos;&quot;) \&apos;&apos; %&gt; å‘çŽ°äº†,ä»–å¦ˆçš„æœ€åŽä¸€ä¸ªè½¬ä¹‰æ–œæ \åŽè¾¹æŽ¥äº†ä¸ªç©ºæ ¼â€¦wtf.è€Œè¿™éƒ½æ˜¯æˆ‘åœ¨ä¿å­˜æ—¶vsç»™æˆ‘è‡ªåŠ¨æ ¼å¼åŒ–é€ æˆçš„. è¯´äº†å¤ªå¤šè„è¯.åæ€]]></content>
      <categories>
        <category>Web</category>
      </categories>
      <tags>
        <tag>exception</tag>
        <tag>vs</tag>
        <tag>ejs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UIImagePickerControllerä¸èµ°å›žè°ƒçš„é—®é¢˜]]></title>
    <url>%2F2018%2F11%2F09%2FUIImagePickerController%E4%B8%8D%E8%B5%B0%E5%9B%9E%E8%B0%83%E7%9A%84%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©åˆé‡åˆ°äº†ä¸€ä¸ªå¥‡æ€ªçš„é—®é¢˜ä»£ç å¦‚ä¸‹ï¼š 12345UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];imagePicker.allowsEditing = YES;imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;imagePicker.delegate = self;[self presentViewController:imagePicker animated:YES completion:nil]; ç”¨æ³•å¾ˆå¯¹ï¼Œæ²¡æ¯›ç—…ï¼Œå¯å°±æ˜¯ä¸è°ƒç”¨1-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary&lt;NSString *,id&gt; *)info åˆ†æžåŽŸå›  UIImagePickerControllerå®žä¾‹å¯¹è±¡è¢«é‡Šæ”¾äº† //è¿™ä¸å¯èƒ½ï¼Œå¦‚æžœiOSç³»ç»Ÿæ²¡ç–¯é‚£è‚¯å®šæ˜¯æˆ‘ç–¯äº† UIImagePickerControllerdçš„delegateè¢«é‡Šæ”¾äº† //ä½†æ˜¯delegateæ˜¯å½“å‰è§†å›¾æŽ§åˆ¶å™¨è‚¯å®šä¹Ÿæ²¡æœ‰é‡Šæ”¾ delegateè¢«æ”¹äº† //çœ‹äº†çœ‹ä»£ç æ²¡æœ‰æ”¹åŠ¨çš„åœ°æ–¹å•Š ???è¯¡å¼‚çš„äº‹ä»¶ã€‚ã€‚ã€‚ åŽæ¥æˆ‘ç”¨kvoç›‘æµ‹äº†ä¸€ä¸‹delegateï¼Œå‘çŽ°æžœç„¶è¢«æ”¹äº†ï¼Œæ”¹æˆäº† _JZNavigationDelegating â€¦ çœŸç›¸å¤§ç™½åŽŸæ¥æ˜¯æˆ‘åœ¨podé‡ŒåŠ å…¥äº†ä¸€ä¸ªå¸®åŠ©å¤„ç†NavigationBaré¢œè‰²çš„ç¬¬ä¸‰æ–¹åº“ï¼Œè¿™ä¸ªåº“å¯¹UINavigationControlleråšäº†ä¸€äº›å¤„ç†ï¼Œå¦‚ä¸‹å›¾ è€Œæˆ‘ä»¬ä»Šå¤©çš„ä¸»è§’ UIImagePickerControlleræ°æ°å°±æ˜¯UINavigationControllerçš„å­ç±»]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>exception</tag>
        <tag>iOS</tag>
        <tag>imagePicker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CoreDataé‡ŒUUIDçš„å¥‡æ€ªé—®é¢˜]]></title>
    <url>%2F2018%2F11%2F09%2FCoreData%E9%87%8CUUID%E7%9A%84%E5%A5%87%E6%80%AA%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[0x1ä»Šå¤©æˆ‘åœ¨å¼€å‘AppleWatchåº”ç”¨æ—¶å‘çŽ°äº†ä¸€ä¸ªå…³äºŽCoreDataçš„æžå…¶å¤æ€ªçš„é—®é¢˜,ç‰¹æ­¤è®°å½•ä¸‹æ¥ 0x2å› ä¸ºCoreDataæ˜¯æ”¯æŒUUIDç±»åž‹çš„å±žæ€§çš„,æ‰€ä»¥æˆ‘åœ¨è®¾è®¡æŸä¸ªModelæ—¶å°±ç”¨äº†UUIDçš„å±žæ€§,ä½†æ˜¯å› ä¸ºä¸æ˜¯è¿žç»­å¼€å‘å¯¼è‡´æˆ‘åŽæ¥æŠŠè¿™ä¸ªå±žæ€§çš„ç±»åž‹å¿˜äº†,ä»¥ä¸ºæ˜¯String. äºŽæ˜¯æˆ‘åœ¨æ‰‹æœºç«¯çš„ä»£ç é‡Œå†™äº†ç±»ä¼¼è¿™æ ·çš„ä»£ç 123let uuid: String = &quot;7BD09D86-8941-4E50-9A42-7240E970FEE7&quot;let predicate = NSPredicate(format: &quot;uuid = %@&quot;, argumentArray: [uuid])//çœç•¥CoreDataæ ¹æ®predicateèŽ·å–æ•°æ®çš„ä»£ç  æ³¨æ„Modelé‡Œuuidçš„å±žæ€§ç±»åž‹æ˜¯UUID,æˆ‘åœ¨è¿™é‡Œç›´æŽ¥ç”¨çš„æ˜¯Stringç„¶åŽ,æˆ‘â€¦å¾ˆæˆåŠŸçš„èŽ·å–åˆ°äº†é¢„æœŸçš„æ•°æ®.å½“ç„¶,æˆ‘å½“æ—¶å¹¶æ²¡æœ‰æ„è¯†åˆ°ç±»åž‹ä¸åŒ¹é…. äºŽæ˜¯ä¹Ž,æˆ‘æŠŠç›¸åŒçš„ä»£ç æ”¾åˆ°äº†12//MARK: -WCSessionçš„ä»£ç†æ–¹æ³• Watchå‘iPhoneå‘é€çš„æ¶ˆæ¯åœ¨è¿™é‡ŒæŽ¥æ”¶ func session(_ session: WCSession, didReceiveMessage message: [String : Any], replyHandler: @escaping ([String : Any]) -&gt; Void) ç„¶åŽ,æˆ‘æ€Žä¹ˆä¹ŸèŽ·å–ä¸åˆ°æ•°æ®äº†,ä¸€æ¨¡ä¸€æ ·çš„ä»£ç ,æˆ‘æ›¾ä¸€åº¦å˜æˆäº†æœ‰ç¥žè®ºè€…,ç®€ç›´è¯¡å¼‚è‡³æžâ€¦.èŽ·å–æ•°æ®çš„æ–¹æ³•æˆ‘æ”¾åœ¨ä»€ä¹ˆçº¿ç¨‹é‡Œéƒ½ä¸è¡Œ,è¿™ä¸ªä»£ç†å‡½æ•°çš„æ‰§è¡ŒçŽ¯å¢ƒæˆ‘ä¸çŸ¥é“è·Ÿä¸»åº”ç”¨çš„ç¨‹åºæ‰§è¡ŒçŽ¯å¢ƒæœ‰ä»€ä¹ˆä¸åŒ 0x3ç»“æžœåˆ°ç›®å‰ä¸ºæ­¢å¤§å®¶è‚¯å®šå·²ç»çŸ¥é“äº†,å°±æ˜¯æŠŠæŸ¥è¯¢æ—¶çš„Stringç±»åž‹çš„uuidä¿®æ”¹æˆUUIDç±»åž‹ 0x4åŽŸå› æœªçŸ¥]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>CoreData</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CADisplayLinkä¸é”€æ¯å¯¼è‡´å…¶æ‹¥æœ‰è€…ä¹Ÿä¸é‡Šæ”¾]]></title>
    <url>%2F2018%2F11%2F09%2FCADisplayLink%E4%B8%8D%E9%94%80%E6%AF%81%E5%AF%BC%E8%87%B4%E5%85%B6%E6%8B%A5%E6%9C%89%E8%80%85%E4%B9%9F%E4%B8%8D%E9%87%8A%E6%94%BE%2F</url>
    <content type="text"><![CDATA[æˆ‘å‘çŽ°æˆ‘åœ¨æ‹¥æœ‰CADisplayLinkä¸”å…¶æ²¡æœ‰invilidateçš„æƒ…å†µä¸‹ï¼Œä¼šè®©å…¶æ‰€æœ‰è€…æ²¡æ³•é”€æ¯]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>exception</tag>
        <tag>iOS</tag>
        <tag>CADisplayLink</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸ºä»€ä¹ˆdispatch_syncåœ¨ä¸»çº¿ç¨‹ä¼šæ­»é”]]></title>
    <url>%2F2018%2F11%2F09%2F%E4%B8%BA%E4%BB%80%E4%B9%88dispatch-sync%E5%9C%A8%E4%B8%BB%E7%BA%BF%E7%A8%8B%E4%BC%9A%E6%AD%BB%E9%94%81%2F</url>
    <content type="text"><![CDATA[é¦–å…ˆçœ‹ä¸‹é¢ä¸€æ®µä»£ç  dispatch_queue_t queue = dispatch_queue_create(&quot;abc&quot;, DISPATCH_QUEUE_SERIAL); dispatch_sync(queue, ^{//taskA //do something dispatch_sync(queue, ^{//taskB //å•¥ä¹Ÿå¹²ä¸äº† }); }); dispatch_syncå‡½æ•°ç”¨äºŽå°†ä¸€ä¸ªblock(ä»»åŠ¡)æäº¤åˆ°é˜Ÿåˆ—ä¸­åŒæ­¥æ‰§è¡Œï¼Œç›´åˆ°blockæ‰§è¡Œå®ŒåŽï¼Œè¿™ä¸ªå‡½æ•°æ‰ä¼šè¿”å›žã€‚queueæ˜¯ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—ï¼Œå¦‚æžœå…ˆåŽåŠ å…¥ä¸¤ä¸ªä»»åŠ¡ï¼ŒtaskAå’ŒtaskB, é‚£ä¹ˆåªæœ‰taskAæ‰§è¡Œå®Œä¹‹åŽtaskBæ‰èƒ½æ‰§è¡Œã€‚å¦‚æžœtaskBæ˜¯åœ¨taskAä¸­åŠ è¿›é˜Ÿåˆ—çš„ï¼Œé‚£ä¹ˆå®ƒä»¬ä¾ç„¶éµå®ˆå…ˆè¿›å…ˆå‡ºåŽŸåˆ™ï¼Œå³taskAæ‰§è¡Œå®Œä¹‹åŽtaskBæ‰æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯taskBåœ¨ç­‰å¾…taskAå®Œæˆã€‚ä½†æ˜¯å› ä¸ºdispatch_syncçš„åŒæ­¥ç‰¹æ€§,taskBæ‰§è¡Œä¸å®ŒtaskAå°±ä¸ç®—å®Œæˆï¼Œå³taskAåœ¨ç­‰å¾…taskBçš„å®Œæˆï¼Œè¿™æ ·å°±å‘ç”Ÿäº†æ­»é”ã€‚ æ ¹æ®ä¸Šé¢é‚£ä»½ä»£ç ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç†è§£ä¸‹é¢çš„ä»£ç ä¸ºä»€ä¹ˆä¼šé˜»å¡žä¸»çº¿ç¨‹äº†ã€‚ dispatch_queue_t mainQueue = dispatch_get_main_queue(); dispatch_sync(mainQueue, ^{ NSLog(@&quot;hello&quot;); }); mainQueueæ˜¯ç³»ç»Ÿåˆ›å»ºçš„ï¼Œåœ¨æ‰§è¡Œä¸Šé¢çš„ä»£ç ä¹‹å‰å°±å·²ç»åŠ è¿›åŽ»äº†å¾ˆå¤šä»»åŠ¡ dispatch_queue_t queue = dispatch_queue_create(&quot;Main&quot;, DISPATCH_QUEUE_SERIAL); dispatch_sync(queue, ^{ //Task A }); ... dispatch_sync(queue, ^{ //Task N }); åœ¨è¿™Nä¸ªä»»åŠ¡é‡Œæœ‰ä¸€ä¸ªä»»åŠ¡æ˜¯è¿™æ ·çš„ï¼š dispatch_sync(queue, ^{ dispatch_queue_t mainQueue = dispatch_get_main_queue(); dispatch_sync(mainQueue, ^{ NSLog(@&quot;hello&quot;); }); }); æ‰€ä»¥ï¼Œå‘ç”Ÿæ­»é”å°±æ˜¯å¿…ç„¶çš„äº†ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>GCD</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽè¿žç»­è§¦å‘çš„å‡½æ•°ä¸­åŠ¨ç”»å¼‚å¸¸çš„æè¿°]]></title>
    <url>%2F2018%2F11%2F09%2F%E5%85%B3%E4%BA%8E%E8%BF%9E%E7%BB%AD%E8%A7%A6%E5%8F%91%E7%9A%84%E5%87%BD%E6%95%B0%E4%B8%AD%E5%8A%A8%E7%94%BB%E5%BC%82%E5%B8%B8%E7%9A%84%E6%8F%8F%E8%BF%B0%2F</url>
    <content type="text"><![CDATA[æˆ‘æƒ³è¦çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼Œæˆ‘æœ‰ä¸¤ä¸ªlabelåƒçƒåœºä¸Šçš„å¹¿å‘Šç‰Œä¸€æ ·äº¤æ›¿æ»šåŠ¨ï¼Œå½“å‰çš„å¾€ä¸Šç§»åŠ¨é€æ¸æ¶ˆå¤±ä¸‹è¾¹çš„ä»Žä¸‹è¾¹åŒæ—¶å¾€ä¸Šç§»åŠ¨é€æ¸å‡ºçŽ°ã€‚æˆ‘ä¸ºäº†åœ¨autolayoutä¸‹ä¹Ÿèƒ½å®žçŽ°æ‰€ä»¥ä¸€å¼€å§‹å‡†å¤‡ç”¨transformå®žçŽ°ï¼Œä½†æ˜¯å‘çŽ°å¾€ä¸Šç§»åŠ¨çš„åŠ¨ç”»å¼‚å¸¸ï¼Œä¸çŸ¥é“ä»€ä¹ˆåŽŸå› ï¼Œè®©äººéƒé—·ã€‚ã€‚ã€‚ä¾¿ç§˜çš„æ„Ÿè§‰å¾ˆä¹…ä¹‹åŽï¼Œæˆ‘å†³å®šé€€è€Œæ±‚å…¶æ¬¡ï¼Œç”¨æ”¹å˜centeræ¥å®žçŽ°ï¼Œé—®é¢˜è§£å†³äº†ï¼Œä½†æ˜¯æ˜¯å»ºç«‹åœ¨æˆ‘è¿™ä¸¤ä¸ªlabelæ²¡æœ‰autolayoutçš„åŸºç¡€ä¹‹ä¸Šã€‚ä»Šå¤©ç‰¹æ­¤è®°ä¸‹ï¼Œç•™å¾…ä»¥åŽç ”ç©¶ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>exception</tag>
        <tag>iOS</tag>
        <tag>autolayout</tag>
        <tag>åŠ¨ç”»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»¿QQå·¦ä¾§æ»‘åŠ¨èœå•çš„å®žçŽ°]]></title>
    <url>%2F2018%2F11%2F09%2F%E4%BB%BFQQ%E5%B7%A6%E4%BE%A7%E6%BB%91%E5%8A%A8%E8%8F%9C%E5%8D%95%E7%9A%84%E5%AE%9E%E7%8E%B0%2F</url>
    <content type="text"><![CDATA[##å†²åŠ¨æœ€è¿‘æŽ¥æ‰‹çš„ä¸€ä¸ªè€é¡¹ç›®æœ‰ä¸ªä¾§æ»‘èœå•çš„éœ€æ±‚ï¼Œè¿™ä¸ªè€é¡¹ç›®çš„ä¾§æ»‘èœå•ç”¨äº†ç½‘ç»œä¸Šçš„ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œä½†æ˜¯è¿™ä¸ªåº“ç«Ÿç„¶æ²¡æœ‰å¤„ç†å¥½å¯¼èˆªæ¡çš„æ˜¾ç¤ºï¼Œä»¥è‡³äºŽé¡¹ç›®ä¸­å¾ˆå¤šéœ€è¦å¯¼èˆªæ¡å±•ç¤ºä¿¡æ¯çš„è§†å›¾éƒ½é€šè¿‡æ·»åŠ subViewçš„æ–¹å¼æ¨¡ä»¿äº†å¯¼èˆªæ¡ã€‚è¿™ç®€ç›´æ˜¯æš´æ®„å¤©ç‰©å•Šï¼Œæ”¾ç€çœŸæ­£çš„å¯¼èˆªæ é‚£å¼ºå¤§çš„ä½œç”¨ä¸ç”¨ï¼Œæµªè´¹äº†å¤šå°‘æ—¶é—´å’Œç²¾åŠ›å•Šï¼Œéƒ½æ˜¯é’æ˜¥å•Šï¼Œå¼€å‘çš„å‰è·¯ä¸Šæ—©å·²æŒ–äº†æ— æ•°çš„å‘ç­‰ç€èº«å¿ƒç–²æƒ«çš„æˆ‘ä»¬å¾€é‡Œè·³å•Šã€‚å¯¹æ­¤æ·±æ¶ç—›ç»çš„æˆ‘ï¼Œæ—©å°±ä¸‹äº†ä¸æ€æ­¤è´¼èª“ä¸ç½¢ä¼‘çš„å†³å¿ƒã€‚å¥½å§ï¼Œæœ€è¿‘çœ‹ä¸‰å›½çœ‹çš„æœ‰ç‚¹å¤šäº†ã€‚ ##æš—æ¸¡é™ˆä»“æˆ‘åœ¨æ— æ‰€ä¸èƒ½çš„GitHubä¸Šæœç´¢ä¾§æ»‘èœå•é¡¹ç›®ï¼Œè¯•éªŒäº†å„ç§ï¼Œå‘è§‰æ²¡æœ‰èƒ½å¾ˆå¥½çš„ç¬¦åˆå½“å‰é¡¹ç›®éœ€æ±‚ã€‚æˆ‘ä»¬å½“å‰çš„é¡¹ç›®éœ€æ±‚æ˜¯è·Ÿæ‰‹æœºQQå·¦ä¾§æ»‘åŠ¨èœå•ä¸€æ ·çš„æ•ˆæžœï¼Œæœ‰ä¸ªé»˜è®¤çš„ä¸»è§†å›¾ï¼Œç„¶åŽå…¶ä»–è§†å›¾çš„å±•ç¤ºéƒ½æ˜¯åœ¨è¿™ä¸ªè§†å›¾çš„åŸºç¡€ä¸Špushå‡ºæ¥çš„ã€‚å½“ç„¶æŠŠè¿™äº›é¡¹ç›®æ”¹é€ å‡ºè¿™ç§åŠŸèƒ½å…¶å®žä¹Ÿä¸éš¾ï¼Œä½†æ˜¯å·¦ä¾§èœå•çš„è§†å·®æ•ˆæžœéƒ½è·ŸQQç›¸å·®ç”šè¿œï¼Œå”¯ä¸€ç›¸ä¼¼çš„å°±æ˜¯RESideMenuè¿™ä¸ªæ¯”è¾ƒæœ‰åçš„é¡¹ç›®ï¼Œä½†æ˜¯å®ƒçš„è§†å·®æ•ˆæžœæ˜¯èœå•åœ¨å±•ç¤ºè¿‡ç¨‹ä¸­ç”±æ¯”è¾ƒå¤§ç„¶åŽç¼©æ”¾åˆ°å®žé™…å¤§å°ï¼Œæ„Ÿè§‰ä¸å¦‚QQçš„æ•ˆæžœå¥½ï¼Œæ€Žå¥ˆæˆ‘å½“æ—¶å¿ƒæƒ…æ¯”éª„å‚²æµ®èºï¼Œæ”¹äº†ä¸ªå‚æ•°ä¹Ÿæ²¡è°ƒå‡ºæƒ³è¦çš„æ•ˆæžœæ¥ï¼ŒäºŽæ˜¯ä¸€æ€’ä¹‹ä¸‹å†³å®šè‡ªå·±å†™ä¸€ä¸ªã€‚äº‹åŽï¼Œå‘çŽ°æœ‰ä¸ªSwiftç‰ˆçš„ç‰¹åˆ«ç‚«é…·ï¼Œå®Œå…¨æ¨¡ä»¿çš„QQï¼Œç‚¹è¿™é‡ŒæŸ¥çœ‹ å¤§å“­ï¼Œæ­¤å¤§ç¥žè¿˜æœ‰ç›¸åº”çš„æ•™ç¨‹ï¼Œå¦‚æžœå„ä½çœ‹å®˜ä¸æƒ³å¬æˆ‘æŽ¥ä¸‹æ¥çš„å®žçŽ°æ€è·¯åˆèƒ½çœ‹æ‡‚Swiftçš„å¯ä»¥çž¬ç§»åˆ°æ­¤å¤§ç¥žçš„åšå®¢äº†ã€‚ ##æ€è·¯ä¸é€â€¦.. å‘œå‘œå‘œâ€¦â€¦å…ˆçœ‹æˆ‘å¯’ç¢œçš„æ•ˆæžœ å®žåœ¨å¿ä¸äº†ï¼Œæ¢äº†å°å›¾äº† å“Žï¼Œç‚«é…·æ²¡æ³•æ¯”å•Šã€‚ iOS5ä¹‹åŽæ¯ä¸ªUIViewControlleréƒ½å¯ä»¥è½»æ¾å½“ä¸€ä¸ªå®¹å™¨äº†ï¼Œå¯ä»¥åŒæ—¶ç®¡ç†è®¸å¤šå…¶ä»–çš„UIViewControlleräº†ã€‚ addChildViewController: willMoveToParentViewController: didMoveToParentViewController: æ‹¿åŽ»ï¼Œä¸è°¢ï¼å…·ä½“æ€Žä¹ˆå†™ä¸€ä¸ªå®¹å™¨ä¸åœ¨æœ¬æ–‡çš„è®¨è®ºé‡ç‚¹ï¼Œè¿˜è¯·å¤§å®¶è‡ªè¡Œè°·æ­Œã€‚å¥½å§ï¼Œæˆ‘æ˜¯åœ¨ç”¨çº¢æç¿»å¢™ è½¯å¹¿å–æ¶ˆï¼Œçº¢æè¢«éƒ­å˜‰å¹²æŽ‰åŽæˆ‘çš„é’±ä¹Ÿè¿½ä¸å›žæ¥äº† çŽ°åœ¨çš„è¯æˆ‘æœ‰ä¸¤ä¸ªå­è§†å›¾æŽ§åˆ¶å™¨äº†ï¼ŒæŠŠä»–ä»¬çš„viewåˆ†åˆ«æ”¾åœ¨äº†æˆ‘è‡ªå®šä¹‰çš„menuViewContainerå’ŒcontentViewContainerè¿™ä¸¤ä¸ªViewé‡Œã€‚OKï¼ŒåŸºç¡€å·²æ‰“å¥½ã€‚ç†æ‰€åº”å½“ï¼Œæˆ‘åœ¨contentViewCcontainerä¸Šæ·»åŠ ä¸€ä¸ªæ»‘åŠ¨æ‰‹åŠ¿ï¼Œæ»‘åŠ¨æ—¶ç§»åŠ¨è§†å›¾çš„ä½ç½®å°±è¡Œäº†ã€‚é‚£æ€Žä¹ˆç¡®å®šæ‰‹æŒ‡åœ¨æ»‘åŠ¨æ—¶ç›¸åº”çš„è§†å›¾åº”è¯¥æ»‘åŠ¨åˆ°å“ªå‘¢ï¼Ÿæ»‘åŠ¨åˆ°å“ªé‡Œç»“æŸå‘¢ï¼Ÿæ€Žä¹ˆç¡®å®šåŒæ—¶æ”¹ç¼©æ”¾åˆ°ä»€ä¹ˆç¨‹åº¦å‘¢ï¼Ÿè¿™äº›é—®é¢˜æˆ‘æœ¬æ¥æƒ³ä¸€ä¸€è¯´è®²ä¸€éï¼Œå‘çŽ°è‡ªå·±å¤ªå•°å—¦ï¼Œåˆä¸çŸ¥é“è¯¥æ€Žä¹ˆè®²ï¼Œæ‰€ä»¥è¿˜æ˜¯ç›´æŽ¥ä¸Šä»£ç å§ã€‚ - (void)panGestureRecognizer:(UIScreenEdgePanGestureRecognizer *)recognizer{ CGPoint point = [recognizer translationInView:self.view]; if(recognizer.state == UIGestureRecognizerStateBegan) { [self updateContentViewShadow]; }else if(recognizer.state == UIGestureRecognizerStateChanged){ CGFloat menuVisibleWidth = self.view.bounds.size.width-self.realContentViewVisibleWidth; CGFloat delta = self.menuHidden ? point.x/menuVisibleWidth : (menuVisibleWidth+point.x)/menuVisibleWidth; CGFloat scale = 1-(1-MinScaleContentView)*delta; CGFloat menuScale = MinScaleMenuView + (1-MinScaleMenuView)*delta; if(self.menuHidden){ //ä»¥å†…å®¹è§†å›¾æœ€å°ç¼©æ”¾ä¸ºç•Œé™ if(scale &lt; MinScaleContentView){//A self.contentViewContainer.transform = CGAffineTransformMakeTranslation(menuVisibleWidth, 0); self.contentViewContainer.transform = CGAffineTransformScale(self.contentViewContainer.transform,MinScaleContentView,MinScaleContentView); self.contentViewScale = MinScaleContentView; self.menuViewContainer.transform = CGAffineTransformMakeScale(1, 1); self.menuViewContainer.transform = CGAffineTransformTranslate(self.menuViewContainer.transform, 0, 0); }else{//å¤§äºŽæœ€å°ç•Œé™åˆåˆ†å¤§äºŽç­‰äºŽ1å’Œå°äºŽ1ä¸¤ç§æƒ…å†µ if(scale &lt; 1){//B self.contentViewContainer.transform = CGAffineTransformMakeTranslation(point.x, 0); self.contentViewContainer.transform = CGAffineTransformScale(self.contentViewContainer.transform,scale, scale); self.contentViewScale = scale; self.menuViewContainer.transform = CGAffineTransformMakeScale(menuScale, menuScale); self.menuViewContainer.transform = CGAffineTransformTranslate(self.menuViewContainer.transform, -MoveDistanceMenuView *(1-delta), 0); }else{//C self.contentViewContainer.transform = CGAffineTransformMakeTranslation(0, 0); self.contentViewContainer.transform = CGAffineTransformScale(self.contentViewContainer.transform,1, 1); self.contentViewScale = 1; self.menuViewContainer.transform = CGAffineTransformMakeScale(MinScaleMenuView, MinScaleMenuView); self.menuViewContainer.transform = CGAffineTransformTranslate(self.menuViewContainer.transform, -MoveDistanceMenuView, 0); } } }else{ if(scale &gt; 1){//D self.contentViewContainer.transform = CGAffineTransformMakeTranslation(0, 0); self.contentViewContainer.transform = CGAffineTransformScale(self.contentViewContainer.transform,1,1); self.contentViewScale = 1; self.menuViewContainer.transform = CGAffineTransformMakeScale(MinScaleMenuView, MinScaleMenuView); self.menuViewContainer.transform = CGAffineTransformTranslate(self.menuViewContainer.transform, -MoveDistanceMenuView, 0); }else{ if(scale&gt;MinScaleContentView){//E self.contentViewContainer.transform = CGAffineTransformMakeTranslation(point.x+menuVisibleWidth, 0); self.contentViewContainer.transform = CGAffineTransformScale(self.contentViewContainer.transform,scale, scale); self.contentViewScale = scale; self.menuViewContainer.transform = CGAffineTransformMakeScale(menuScale, menuScale); self.menuViewContainer.transform = CGAffineTransformTranslate(self.menuViewContainer.transform, -MoveDistanceMenuView * (1-delta), 0); }else{//F self.contentViewContainer.transform =CGAffineTransformMakeTranslation(self.view.bounds.size.width-self.realContentViewVisibleWidth, 0); self.contentViewContainer.transform = CGAffineTransformScale(self.contentViewContainer.transform,MinScaleContentView, MinScaleContentView); self.contentViewScale = MinScaleContentView; self.menuViewContainer.transform = CGAffineTransformMakeScale(1, 1); self.menuViewContainer.transform = CGAffineTransformTranslate(self.menuViewContainer.transform, 0, 0); } } } }else if(recognizer.state == UIGestureRecognizerStateEnded){ [self showMenu:(self.contentViewContainer.frame.origin.x &gt; self.view.bounds.size.width/2)]; } } è¿™æ ·çš„ç»“å°¾æ˜¯ä¸æ˜¯å¤ªä¸è´Ÿè´£ä»»äº†ï¼Ÿï¼Ÿï¼Ÿå¥½å§ï¼Œæˆ‘æé†’å¤§å®¶ï¼Œæ•´æ®µä»£ç çš„ç²¾åŽå…¨åœ¨deltaçš„è®¡ç®—ï¼Œè§†å›¾æ»‘åŠ¨åŽçš„æœ€ç»ˆçŠ¶æ€æ˜¯ç”±menuVisibleWidthå’ŒMinSacleContentViewæ¥å†³å®šã€‚æ ¹æ®å½“å‰æ‰‹åŠ¿æ»‘åŠ¨çš„è·ç¦»å menuVisibleWidthçš„ç™¾åˆ†æ¯”æ¥è®¡ç®—æ»‘åŠ¨åŠ¨ä½œå®Œæˆåº¦ï¼Œç„¶åŽæ ¹æ®è¿™ä¸ªå€¼æ¥ç§»åŠ¨å’Œç¼©æ”¾ç›¸åº”çš„è§†å›¾ã€‚ æœ€åŽï¼Œä¸Šæˆ‘çš„é¡¹ç›®åœ°å€ï¼Œå¦‚æžœå¤§å®¶ä¸å«Œå¼ƒï¼Œè¯·ç»™starï¼Œå¦‚æžœæœ‰é—®é¢˜ï¼Œçƒ¦è¯·ç•™è¨€ã€‚æ„Ÿæ¿€æ¶•é›¶]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å›žå¤´çœ‹UITableView(ä¸‰)-ä¸‹æ‹‰åˆ·æ–°çš„å®žçŽ°]]></title>
    <url>%2F2018%2F11%2F09%2F%E5%9B%9E%E5%A4%B4%E7%9C%8BUITableView-%E4%B8%89-%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E7%9A%84%E5%AE%9E%E7%8E%B0%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘é™·å…¥äº†é¡¹ç›®ä¸­ä¸€ä¸ªæ—¥åŽ†æœˆè§†å›¾ä¸Žå‘¨è§†å›¾åˆ‡æ¢æ•ˆæžœçš„å®žçŽ°ï¼Œé•¿æ—¶é—´æ²¡æœ‰å®žçŽ°æƒ³è¦çš„æ•ˆæžœï¼Œæ²®ä¸§è‡³æžã€‚çƒ¦è¯·æœ‰å¥½æƒ³æ³•çš„åŒå­¦æŒ‡ç‚¹ä¸€äºŒï¼Œåœ¨çº¿ç­‰@ç•™ä»€ä¹ˆç™½ã€‚ ç»“æŸä¾‹è¡Œçš„å•°å—¦ï¼Œè¿›å…¥æ­£é¢˜ã€‚ å¤§å®¶å¯èƒ½éƒ½ç”¨è¿‡MJRefresh,ååˆ†ä¹‹æ–¹ä¾¿ï¼ŒæŽæ˜Žæ°è€å¸ˆå€ŸåŠ©runtimeçš„ç‰¹æ€§ï¼Œæžå°½ä¹‹èƒ½ï¼Œè®©åƒåƒä¸‡ä¸‡å°ç™½å¼€å‘è€…å’Œéµå¾ªä¸é‡å¤åˆ¶é€ è½®å­åŽŸåˆ™çš„å¼€å‘è€…ç”¨æœ€å°‘çš„ä»£ç å°±å®žçŽ°äº†ç•Œé¢ä¸‹æ‹‰åˆ·æ–°çš„åŠŸèƒ½ã€‚æˆ‘ä»¬ä»Šå¤©ä¸è°ˆruntimeçš„é»‘é­”æ³•ï¼Œè€Œæ˜¯UITableViewæœ€å¸¸è§çš„åˆ·æ–°æ•°æ®æ–¹å¼ä¸‹æ‹‰åˆ·æ–°çš„å®žçŽ°è¿‡ç¨‹ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸‰ä¸ªæžšä¸¾å€¼ typedef NS_ENUM(NSUInteger, RefreshState) { RefreshStateNormal,//æ­£å¸¸ RefreshStatePulling,//é‡Šæ”¾å³å¯åˆ·æ–° RefreshStateLoading,//åŠ è½½ä¸­ }; åˆ†åˆ«è¡¨ç¤ºæ­£å¸¸çŠ¶æ€ã€é‡Šæ”¾å³å¯åˆ·æ–°çŠ¶æ€ã€åŠ è½½ä¸­çŠ¶æ€ ä¸ºäº†ç®€å•è¯´æ˜Žï¼Œæˆ‘ä»¬åªç”¨ä¸€ä¸ªUILabelæ¥è¡¨çŽ°å°±å¯ä»¥ï¼ŒæŠŠå®ƒæ”¾åœ¨å†…å®¹ä¸Šæ–¹ï¼Œä¹Ÿå°±æ˜¯æ­£å¸¸æƒ…å†µä¸‹çœ‹ä¸åˆ°çš„åœ°æ–¹ï¼Œåªæœ‰ä¸‹æ‹‰çš„æ—¶å€™æ‰èƒ½çœ‹åˆ°ã€‚ ç„¶åŽæˆ‘ä»¬ä¼°ç®—ä¸€ä¸ªå¤§ä½“çš„è·ç¦»ï¼Œä»Žè€Œç¡®å®šè§¦å‘åŠ è½½çŠ¶æ€çš„ä¸´ç•Œç‚¹ã€‚ ç®€å•æè¿°ä¸€ä¸‹å°†è¦å®žçŽ°çš„æƒ…å½¢ï¼š æˆ‘ä»¬å¾€ä¸‹æ»‘åŠ¨è§†å›¾ï¼Œå¦‚æžœè§†å›¾ä¸‹æ»‘åˆ°è§¦å‘ç‚¹ï¼ŒçŠ¶æ€å˜ä¸ºRefreshStatePulling,å³æ ‡ç­¾æ–‡å­—å˜ä¸ºâ€œæ¾æ‰‹å³å¯åˆ·æ–°â€ã€‚æŽ¥ä¸‹æ¥æœ‰ä¸¤ç§çŠ¶å†µä¼šå‘ç”Ÿï¼šä¸€ï¼Œæ¾å¼€æ‰‹ï¼›äºŒï¼Œä¸æ¾æ‰‹ï¼Œåˆå‘åˆå§‹ä½ç½®æ»‘ã€‚ç¬¬ä¸€ç§æƒ…å†µï¼Œå½“ä½ æ¾å¼€æ‰‹æ—¶ï¼Œå› ä¸ºUIScrollViewæœ‰å›žå¼¹æ•ˆæžœï¼Œè§†å›¾ä¼šå¾€ä¸Šæ»‘åŠ¨ï¼Œå½“åˆ°è¾¾è§¦å‘ç‚¹æ—¶ï¼ŒçŠ¶æ€æ”¹ä¸ºRefreshStateLoading,å³è§†å›¾åœåœ¨å½“å‰ä½ç½®ï¼Œä¸å—å›žå¼¹ä½œç”¨å½±å“ï¼Œæ ‡ç­¾æ–‡å­—å˜ä¸ºâ€œåŠ è½½ä¸­â€¦â€,ç­‰åŠ è½½åŠ¨ä½œå®Œæˆä¹‹åŽï¼Œæ‰‹åŠ¨è§¦å‘å¤åŽŸåŠ¨ä½œï¼Œè§†å›¾æ»‘åˆ°åŽŸå§‹çŠ¶æ€ RefreshStateNormal,åŒæ—¶æ ‡ç­¾æ–‡å­—å˜ä¸ºâ€˜ä¸‹æ‹‰åˆ·æ–°â€™ï¼›ç¬¬äºŒç§æƒ…å†µï¼Œä½ æ²¡æœ‰æ¾æ‰‹ï¼Œç„¶åŽåˆå¾€å›žæ»‘åŠ¨ï¼Œå½“åˆ°è¾¾è§¦å‘ç‚¹ä»¥ä¸Šæ—¶ï¼ŒçŠ¶æ€å˜ä¸ºåˆå§‹çŠ¶æ€RefreshStateNormalã€‚ å¦‚æžœä½ å¯¹ä¸Šè¿°è¿‡ç¨‹ä¸æ˜¯å¾ˆäº†è§£çš„è¯ï¼Œé‚£ä½ éšä¾¿æ‰¾ä¸ªå¸¦ä¸‹æ‹‰åˆ·æ–°çš„åº”ç”¨è¯•è¯•å°±è¡Œäº†ï¼Œä¸ç”¨æ¸©æŸ”ï¼Œè¶Šæš´åŠ›è¶Šå¥½ã€‚å¼„æ¸…ä¸Šè¿°è¿‡ç¨‹æ˜¯å®žçŽ°æ•´ä¸ªæµç¨‹çš„åŸºç¡€ã€‚ æŽ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯å†³å®šä»€ä¹ˆæ—¶å€™æ”¹å˜çŠ¶æ€äº†ï¼Œå‚ç…§ä¸Šè¿°è¿‡ç¨‹ï¼Œæˆ‘ä»¬åœ¨UIScrollViewçš„ä»£ç†å‡½æ•°scrollViewDidScroll:ç›‘æŽ§contentOffsetçš„å˜åŒ–ï¼Œå†ç»“åˆisDraggingå±žæ€§å°±å¯ä»¥æ”¹å˜çŠ¶æ€äº†ã€‚ - (void)scrollViewDidScroll:(UIScrollView *)scrollView{ if(scrollView.contentOffset.y &lt; -SwitchPoint-self.originalInsetTop){ if(self.refreshState == RefreshStateNormal){//å°äºŽä¸´ç•Œå€¼ï¼ˆåœ¨è§¦å‘ç‚¹ä»¥ä¸‹ï¼‰ï¼Œå¦‚æžœçŠ¶æ€æ˜¯æ­£å¸¸å°±è½¬ä¸ºä¸‹æ‹‰åˆ·æ–°ï¼Œå¦‚æžœæ­£åœ¨åˆ·æ–°æˆ–è€…å·²ç»æ˜¯ä¸‹æ‹‰åˆ·æ–°åˆ™ä¸å˜ self.refreshState = RefreshStatePulling; } }else{//å¤§äºŽä¸´ç•Œå€¼ï¼ˆåœ¨è§¦å‘ç‚¹ä»¥ä¸Šï¼ŒåŒ…æ‹¬è§¦å‘ç‚¹ï¼‰ if(scrollView.isDragging){//æ‰‹æŒ‡æ²¡æœ‰ç¦»å¼€å±å¹• if(self.refreshState == RefreshStatePulling){//åŽŸæ¥æ˜¯ä¸‹æ‹‰çš„è¯å˜æˆæ­£å¸¸ï¼ŒåŽŸæ¥æ˜¯åˆ·æ–°æˆ–è€…æ­£å¸¸çš„è¯ä¸å˜ self.refreshState = RefreshStateNormal; } }else{//æ‰‹æŒ‡ç¦»å¼€å±å¹• if(self.refreshState == RefreshStatePulling){//åŽŸæ¥æ˜¯ä¸‹æ‹‰çš„è¯å˜æˆåŠ è½½ä¸­ï¼ŒåŽŸæ¥æ˜¯åŠ è½½ä¸­æˆ–è€…æ­£å¸¸çš„è¯ä¸å˜ self.tableView.contentInset = UIEdgeInsetsMake(self.originalInsetTop+SwitchPoint, 0, 0, 0);//æ”¹å˜contentInsetçš„å€¼å°±å¯ä»¥å–æ¶ˆå›žå¼¹æ•ˆæžœåœç•™åœ¨å½“å‰ä½ç½®äº† å…³äºŽcontentIinsetçš„ä»‹ç»ï¼Œå¯ä»¥æŸ¥çœ‹æˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç«  self.refreshState = RefreshStateLoading; } } } } è¿™æ®µä»£ç å†³å®šäº†UIScrollViewæ¯ä¸ªæ—¶åˆ»çš„çŠ¶æ€ï¼Œé‚£ä¹ˆæŽ¥ä¸‹æ¥çš„å°±ç®€å•å¤šäº†ï¼Œåªè¦é‡å†™ä¸€ä¸‹setRefreshState:æ–¹æ³•å°±å¯ä»¥äº†ã€‚ - (void)setRefreshState:(RefreshState)refreshState{ _refreshState = refreshState; switch (refreshState) { case RefreshStateNormal: self.pulldownLabel.text = @&quot;ä¸‹æ‹‰åˆ·æ–°&quot;; [self.pulldownLabel sizeToFit]; break; case RefreshStateLoading: self.pulldownLabel.text = @&quot;æ­£åœ¨åˆ·æ–°...&quot;; [self.pulldownLabel sizeToFit]; if(self.refreshBlock){ self.refreshBlock();//è¿™é‡Œå°±æ˜¯ä½ è¦æ‰§è¡Œçš„è€—æ—¶çš„æ“ä½œ } break; case RefreshStatePulling: self.pulldownLabel.text = @&quot;æ¾å¼€å³å¯åˆ·æ–°&quot;; [self.pulldownLabel sizeToFit]; break; default: break; } } çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„æ•ˆæžœï¼šå½“ç„¶ä½ ä¼šè¯´è¿™ä¸å¤Ÿdiao,ä¸å¤Ÿç‚«é…·ï¼Œäººå®¶çš„æ•ˆæžœéƒ½æ˜¯è¿™æ ·ï¼š åˆè¢«ä½ å‘çŽ°äº†ï¼ŒðŸ˜‚ï¼Œæˆ‘æ»¡(hao)æ˜¯(wu)è™”(jie)è¯š(cao)åœ°ç›—äº†å¤§ç¥žçš„å›¾ï¼Œ@Mäº†ä¸ªJï¼Œå¤§ç¥žï¼Œè†ç›–å·²å‘è´§ï¼Œè¯·éªŒæ”¶ã€‚ é‚£ä¹ˆæˆ‘ä»¬æ€Žä¹ˆå®žçŽ°è¿™æ ·çš„æ•ˆæžœå‘¢ï¼Œå¾ˆç®€å•ï¼Œåœ¨ä¸Šè¾¹è®¾ç½®çŠ¶æ€çš„ä»£ç é‡Œæ·»åŠ åŠ¨ç”»å°±è¡Œäº†ã€‚æ¥ä¸€æ®µä¼ªçš„ä»£ç ï¼š case RefreshStateNormal: self.pulldownLabel.text = @&quot;ä¸‹æ‹‰åˆ·æ–°&quot;; [UIView animateWithDuration:0.3 animations:^{ self.arrowImage.transform = CGAffineTransformMakeRotation(M_PI/2);//ç®­å¤´æ—‹è½¬180Âº }]; break; è¿˜æœ‰ä¸€ç‚¹éœ€è¦å¼ºè°ƒï¼Œåœ¨scrollViewDidScroll:é‡Œä¿æŒåŠ è½½çŠ¶æ€æ—¶ä¿®æ”¹äº†contentInset,æ‰€ä»¥å–æ¶ˆåŠ è½½çŠ¶æ€æ¢å¤åŽŸçŠ¶æ—¶åªéœ€â€¦å¦‚æ­¤å¦‚æ­¤ï¼š - (void)endRefresh{ if(self.refreshState == RefreshStateLoading){ self.refreshState = RefreshStateNormal; [UIView animateWithDuration:0.3 animations:^{ self.tableView.contentInset = UIEdgeInsetsMake(self.originalInsetTop, 0, 0, 0); } completion:nil]; } } OKï¼Œå¸Œæœ›çœ‹åˆ°è¿™é‡Œä½ èƒ½ç†è§£ä¸‹æ‹‰åˆ·æ–°çš„æ•´ä¸ªè¿‡ç¨‹åŠåŽŸç†äº†ï¼Œæ¬¢è¿ŽæŒ‡æ­£å’Œæ‰“å‡»ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>UITableView</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å›žå¤´çœ‹UITableView(äºŒ)-çˆ¶è§†å›¾UIScrollView]]></title>
    <url>%2F2018%2F11%2F09%2F%E5%9B%9E%E5%A4%B4%E7%9C%8BUITableView-%E4%BA%8C-%E7%88%B6%E8%A7%86%E5%9B%BEUIScrollView%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®æ—©æ—©å°±å®šä¸‹äº†ï¼ŒçŽ°åœ¨æƒ³å¡«å……å†…å®¹äº†ï¼Œè¸Œèº‡ä¸­å´ä¸çŸ¥é“ä»Žå“ªé‡Œå¼€å§‹äº†ã€‚çª—å¤–çªç„¶ä¸‹èµ·é›¨æ¥ã€‚è™½ç„¶ä¸æ„¿æ‰¿è®¤ï¼Œä½†å¤å¤©ç¡®å®žå·²ç»æ¸åŽ»æ¸è¿œï¼Œå‡‰æ„å¼€å§‹è”“å»¶ã€‚ç´¢æ€§æ”¾ç©ºèº«å¿ƒï¼Œä¼´ç€é›¨å£°å…¥çœ å§ã€‚ Iâ€™m back! ä¼—æ‰€å‘¨çŸ¥ï¼ŒUITableViewçš„çˆ¶è§†å›¾å°±æ˜¯UIScrollView,UITableViewä¹‹æ‰€ä»¥èƒ½æ»šåŠ¨å°±æ˜¯åŸºäºŽUIScrollViewçš„ç‰¹æ€§ï¼Œä»Šå¤©å’±ä»¬å°±æ¥æ·±å…¥ç†è§£ä¸€ä¸‹UIScrollViewã€‚ ä¸Šå›¾ï¼š æ‰“ç ï¼š - (IBAction)boundsAction:(UIStepper *)sender { self.redView.bounds = CGRectMake(0, sender.value, self.redView.bounds.size.width, self.redView.bounds.size.height); self.boundsLabel.text = [NSString stringWithFormat:@&quot;çº¢è‰²è§†å›¾bounds%@&quot;,NSStringFromCGRect(self.redView.bounds)]; } æˆ‘å¦‚æžœè¯´æ”¹å˜boundsçš„å€¼ä¸ç”¨UIStepperå®žçŽ°è€Œæ˜¯ç”¨æ‰‹åŠ¿å®žçŽ°ï¼Œä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰ç§æç„¶å¤§æ‚Ÿçš„æ„Ÿè§‰ã€‚ æˆ‘ä»¬å†å¤ä¹ ä¸€ä¸‹UIViewçš„frameå’Œboundsæ˜¯ä»€ä¹ˆã€‚. frame:å½“å‰viewåœ¨çˆ¶viewåæ ‡ä½“ç³»ä¸­çš„ä½ç½®å’Œå¤§å°. bounds:å½“å‰viewçš„åæ ‡ä½“ç³»ï¼Œå®¹çº³å­viewçš„ä½ç½®å’Œå¤§å°ä¹Ÿå°±è¯´ä¸€ä¸ªviewçš„ä½ç½®æ˜¯ç”±å½“å‰viewçš„frameå’Œå…¶çˆ¶viewçš„boundså†³å®šçš„ã€‚ å›žåˆ°ä¸Šé¢çš„çº¢ç»¿è§†å›¾ï¼Œä½ å·²ç»çœ‹åˆ°:æ”¹å˜çˆ¶viewï¼ˆçº¢è‰²è§†å›¾ï¼‰çš„bounds,å­viewï¼ˆç»¿è‰²è§†å›¾ï¼‰çš„ä½ç½®å°±ä¼šç›¸åº”çš„æ”¹å˜ã€‚å¦‚æžœæˆ‘ä»¬ç»™çº¢è‰²è§†å›¾åŠ ä¸€ä¸ªUIPangestureRecognizerï¼ˆæ‹–åŠ¨æ‰‹åŠ¿ï¼‰ï¼Œæ»‘åŠ¨æ—¶æ ¹æ®å…¶ä»£ç†å‡½æ•°è¿”å›žçš„å€¼ä¿®æ”¹çº¢è‰²è§†å›¾çš„boundså°±å®žçŽ°äº†ç»¿è‰²è§†å›¾çš„æ»‘åŠ¨ã€‚ å†ä¸Šå›¾ï¼šå†æ‰“ç ï¼š - (IBAction)panHandler:(UIPanGestureRecognizer *)sender { if(sender.state == UIGestureRecognizerStateChanged){ CGFloat distance = -[sender translationInView:sender.view].y; self.redView.bounds = CGRectMake(0, self.redView.bounds.origin.y+distance, self.redView.bounds.size.width, self.redView.bounds.size.height); [sender setTranslation:CGPointZero inView:sender.view]; }else if(sender.state == UIGestureRecognizerStateEnded){ self.boundsLabel.text = [NSString stringWithFormat:@&quot;çº¢è‰²è§†å›¾bounds%@&quot;,NSStringFromCGRect(self.redView.bounds)]; } } æžœç„¶å›¾å¤šå¯ä»¥å°‘è¯´è¯ã€‚é‚£ä¹ˆä½ æ˜¯ä¸æ˜¯å¯ä»¥è‡ªå·±æ‰‹åŠ¨å†™ä¸ªUIScrollViewäº†ï¼Œå¦‚æžœä½ æ•¢å›žç­”ä¸èƒ½æˆ‘å°±æ•¢ä¸€æ˜ŸæœŸä¸åƒè‚‰ã€‚é¡ºä¾¿æŽ¨èä¸€ä¸ªå½•å±è½¯ä»¶ï¼Œä¸ªäººæ„Ÿè§‰å¾ˆå¥½ç”¨ï¼Œç›´æŽ¥ç”Ÿæˆä½“ç§¯è¾ƒå°çš„gifã€‚åœ°å€æ˜¯http://www.cockos.com/licecap/ å½“ç„¶ï¼Œå¯¹äºŽè¿™ä¸ªèƒ½æ»‘åŠ¨çš„è§†å›¾çš„å§‹ç¥–ï¼Œæˆ‘ä»¬è¦æƒ³æœ‰å¼ºçƒˆçš„æŽŒæŽ§æ„Ÿï¼Œè¿˜éœ€è¦äº†è§£å‡ ä¸ªå±žæ€§ã€‚ contentSize ðŸ˜“ åˆè¦æåˆ°ä¸Šå›¾äº†ï¼Œå¥½å§ï¼Œå¦‚ä¸Šå›¾ï¼ŒcontentSizeå…¶å®žå°±æ˜¯ç»¿è‰²è§†å›¾çš„å¤§å°ï¼Œå°±æ˜¯å†…å®¹ç©ºé—´çš„å¤§å°ã€‚åœ¨UIScrollViewé‡Œï¼Œå½“contentSizeå¤§äºŽæœ¬èº«çš„frame.sizeçš„æ—¶å€™å°±å¯ä»¥æ»šåŠ¨ï¼Œå¦åˆ™ä¸å…è®¸ã€‚ contentOffset è¿˜æ˜¯å¦‚ä¸Šå›¾ï¼ŒcontentOffsetå…¶å®žå°±æ˜¯çº¢è‰²è§†å›¾çš„bounds.origin,æ‰€ä»¥ä½ æ˜¯å¦æ˜Žç™½ä¸ºä»€ä¹ˆå½“contentOffsetçš„å€¼æ˜¯æ­£å€¼çš„æ—¶å€™è§†å›¾å¾€ä¸Šï¼Œæ˜¯è´Ÿå€¼çš„æ—¶å€™è§†å›¾å¾€ä¸‹äº†å§ã€‚ contentInsetè¿™ä¸ªå±žæ€§å¾ˆéš¾è¯´æ¸…æ¥šï¼Œæ‰€ä»¥ï¼Œé‚£å°±æ›´åº”è¯¥è¯´äº†ã€‚å¦‚æžœä½ è®¾ç½®äº†è¿™ä¸ªå±žæ€§åŽä¼šå¯¹å†…å®¹è§†å›¾åšä¸€ä¸ªåç§»æ“ä½œï¼Œæˆ–è€…è¯´ç»™å†…å®¹è§†å›¾æ·»åŠ äº†ç•™ç™½ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬è®¾ç½®UIScrollViewçš„contentInsetä¸ºUIEdgeInsetsMake(64, 0, 0, 0)æ³¨æ„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯top,ç„¶åŽä¾æ¬¡æ˜¯left,bottom,rightã€‚é‚£ä¹ˆæ·»åŠ çš„subviewçš„ä½ç½®çºµåæ ‡çš„èµ·ç‚¹å°±æ˜¯subview.frame.origin.y+scrollView.contentInset.top(å½“ç„¶è¿™æ˜¯åœ¨ä¸è€ƒè™‘çˆ¶è§†å›¾çš„boundsçš„æƒ…å†µä¸‹)ã€‚ä½ ä¹Ÿè®¸æ³¨æ„åˆ°äº†ä¸€ç‚¹ï¼Œæˆ‘ç”¨äº†ä½ç½®ä¸€è¯ï¼Œå› ä¸ºè¿™å…¶å®žæ˜¯ç›¸å¯¹çˆ¶è§†å›¾çš„ä½ç½®ï¼Œå®ƒçš„frameå¹¶æ²¡æœ‰æ”¹å˜ã€‚ å•Šå“ˆå“ˆï¼Œ self.scrollView.contentInset = UIEdgeInsetsMake(50, 0, 0, 0); UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 50, self.scrollView.bounds.size.width, 200)]; view.backgroundColor = [UIColor greenColor]; [self.scrollView addSubview:view]; å¦‚å›¾ï¼Œè™½ç„¶viewçš„èµ·ç‚¹æ˜¯50ï¼Œä½†æ˜¯ç”±äºŽcontentInsetçš„åŽŸå› ï¼Œå®ƒç›¸å¯¹äºŽçˆ¶è§†å›¾çš„çºµåæ ‡ä½ç½®æ˜¯100ã€‚ å¥½äº†ï¼Œå…ˆå†™åˆ°è¿™é‡Œï¼ŒåŠžå…¬å®¤å°±æˆ‘ä¸€ä¸ªäººäº†ï¼Œå…„å¼Ÿæˆ‘å…ˆå›žå®¶äº†ã€‚ é¢„å‘Šï¼šæ ¹æ®ä¸Šè¾¹è¿™äº›ä¸œä¸œï¼Œå’±ä»¬ç¨åŽè°ˆè°ˆæ€Žä¹ˆå®žçŽ°ä¸€ä¸ªè‡ªå®šä¹‰çš„ä¸‹æ‹‰åˆ·æ–°æŽ§ä»¶ï¼Œæˆ‘ä¼šå°½å¿«æ›´æ–°ã€‚æœ€åŽï¼Œè¯šå¿ƒæ±‚ä¸€ä¸ªMacä¸Šæ–¹ä¾¿ä½œå›¾çš„è½¯ä»¶ã€‚å¦‚æžœä½ æœ‰ç ´è§£ç‰ˆçš„sketchçš„è¯ï¼Œç»™å…„å¼Ÿä¸€ä¸ªå§ï¼Œå…ˆè°¢è¿‡äº†ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>UITableView</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å›žå¤´çœ‹ä¹‹UITableView-(åŸºæœ¬ä»£ç†æ–¹æ³•åŠå¤ç”¨åŽŸç†)]]></title>
    <url>%2F2018%2F11%2F09%2F%E5%9B%9E%E5%A4%B4%E7%9C%8B%E4%B9%8BUITableView-%E5%9F%BA%E6%9C%AC%E4%BB%A3%E7%90%86%E6%96%B9%E6%B3%95%E5%8F%8A%E5%A4%8D%E7%94%A8%E5%8E%9F%E7%90%86%2F</url>
    <content type="text"><![CDATA[UITableVIewæ˜¯iOSå¼€å‘ä¸­æœ€å¸¸è§çš„è§†å›¾ä¸­æœ€ç»å…¸çš„è§†å›¾äº†ï¼Œæ²¡æœ‰ä¹‹ä¸€ï¼Œç›¸ä¿¡å¯¹è¿™ä¸ªè§†å›¾æ•¢ç§°ç²¾é€šçš„äººå¼€å‘ä¸ªå¥½åº”ç”¨åº”è¯¥æ˜¯é—®é¢˜ä¸å¤§çš„ã€‚ é—²è¯å°‘å™ï¼Œè¿›å…¥æ­£é¢˜ã€‚ æ€Žä¹ˆä½¿ç”¨æŽŒæ¡ä¸¤ä¸ªä»£ç† UITableViewDelegate @optional //ä¸‹æ–‡å†æåˆ°è¯¥æ–¹æ³•ç”¨heightForRowä»£æ›¿ - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath; UITableViewDataSource @required //ä¸‹æ–‡å†æåˆ°è¯¥æ–¹æ³•ç”¨numberOfRowsInSectionä»£æ›¿ - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section; //ä¸‹æ–‡å†æåˆ°è¯¥æ–¹æ³•ç”¨cellForRowä»£æ›¿ - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath; @optional //ä¸‹æ–‡å†æåˆ°è¯¥æ–¹æ³•ç”¨numberOfSectionä»£æ›¿ - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView è¦æƒ³æ¯”è¾ƒå®Œæ•´çš„å±•ç¤ºä½ çš„æ•°æ®ï¼Œè¿™å››ä¸ªæ–¹æ³•æ˜¯æœ€ç»å¸¸è¢«å®žçŽ°çš„ã€‚è°ƒç”¨è¿‡ç¨‹å¤§ä½“æ˜¯è¿™æ ·çš„ï¼štableViewä¼šå…ˆè¯¢é—®ä»£ç†(åœ¨ä¸€èˆ¬MVCé‡Œå¤§éƒ¨åˆ†æ˜¯å½“å‰è§†å›¾æŽ§åˆ¶å™¨ViewController)è¦å±•ç¤ºå¤šå°‘ä¸ªsection,å°±æ˜¯è°ƒç”¨numberOfSections,å¦‚æžœä»£ç†æ²¡æœ‰å®žçŽ°è¯¥æ–¹æ³•é»˜è®¤å°±æ˜¯1ä¸ªsectionã€‚ç„¶åŽtableViewè°ƒç”¨numberOfRowsInSectionå…ˆè¯¢é—®ç¬¬ä¸€ä¸ªsectionæœ‰å¤šå°‘ä¸ªcell,ç„¶åŽæŒ¨ä¸ªæ‰§è¡ŒheightForRowèŽ·å–æ¯ä¸ªcellçš„é«˜åº¦ã€‚tableViewå¯¹æ¯ä¸ªsectionéƒ½æ‰§è¡Œä¸€éè¿™æ ·çš„æ“ä½œåŽï¼Œé‚£ä¹ˆç»“æžœæ¥äº†:tableViewé€šè¿‡å¯¹è¿™äº›cellé«˜åº¦çš„ç´¯åŠ å°±çŸ¥é“äº†éœ€è¦å¤šå¤§çš„ç©ºé—´æ‰èƒ½å®‰æ”¾å¾—äº†æ‰€æœ‰çš„å†…å®¹ï¼ŒäºŽæ˜¯å®ƒè°ƒæ•´å¥½äº†contentSizeçš„å€¼ã€‚è¿™æ ·èµ°ä¸‹æ¥å°±ä¸ºæˆ‘ä»¬åŽç»­åœ¨æ»‘åŠ¨æ—¶èƒ½é€šè¿‡scrollIndicatorè§‚å¯Ÿåˆ°æˆ‘ä»¬å¤§ä½“æ»‘åˆ°äº†å“ªä¸ªä½ç½®åšå¥½äº†å‡†å¤‡ã€‚å‡†å¤‡å¥½ç©ºé—´ä¹‹åŽæŽ¥ä¸‹æ¥çš„ä»»åŠ¡å°±æ˜¯å‡†å¤‡å†…å®¹äº†ã€‚å½“ç„¶å¤§å®¶éƒ½çŸ¥é“çœŸæ­£çš„å†…å®¹æ˜¯ä¾é™„åœ¨UITableViewCellä¸Šçš„ï¼ŒtableViewå…ˆè°ƒç”¨cellForRowåŽ»èŽ·å–ä»£ç†è¿”å›žç»™å®ƒçš„ç¬¬ä¸€ä¸ªcellï¼Œå¯¹äºŽæ‰€æœ‰çš„cellæ¥è¯´widthéƒ½æ˜¯å›ºå®šçš„ï¼Œå³tableViewæœ¬èº«çš„å®½åº¦ï¼Œå¯¹äºŽç¬¬ä¸€ä¸ªcellæ¥è¯´å®ƒçš„originä¹Ÿæ˜¯ç¡®å®šçš„ï¼Œå³(0,0)ï¼Œä¹Ÿå°±æ˜¯è¯´è¦æƒ³ç¡®å®šè¿™ä¸ªcellçš„ä½ç½®å°±åªéœ€è¦çŸ¥é“å®ƒçš„heightäº†ã€‚äºŽæ˜¯tableViewå†åŽ»è°ƒç”¨heightForRowåŽ»èŽ·å–å®ƒçš„é«˜åº¦ï¼Œè¿™æ ·ä¸€ä¸ªè§†å›¾èƒ½ç¡®å®šæ˜¾ç¤ºåœ¨å±å¹•ä»€ä¹ˆä½ç½®çš„å……è¦æ¡ä»¶å°±å…·å¤‡äº†ã€‚å‰©ä¸‹çš„cellåŒç†ï¼ŒæŒ¨ä¸ªæ”¾åœ¨ä¸Šä¸€ä¸ªcellçš„ä¸‹è¾¹å°±è¡Œäº†ã€‚ æ€»ç»“ä¸€ä¸‹: è°ƒç”¨numberOfSectionèŽ·å¾— Aä¸ª section å…ˆè°ƒç”¨numberOfRowsInSectionèŽ·å¾—Bä¸ªcell,å†è°ƒç”¨heightForRowBæ¬¡ã€‚å¦‚æ­¤å¾ªçŽ¯Aæ¬¡ å¾ªçŽ¯è°ƒç”¨cellForRowå’ŒheightForRowï¼Œç›´åˆ°cellçš„ä¸ªæ•°å……æ»¡å½“å‰å±å¹•ã€‚ è¿™å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„tableViewä¸€å¼€å§‹åŠ è½½æ•°æ®çš„è¿‡ç¨‹ï¼Œæœ‰å‡ ç‚¹éœ€è¦è¯´æ˜Žï¼š å¦‚æžœä½ å±•ç¤ºåœ¨æ¯ä¸ªcellä¸Šçš„å†…å®¹æ˜¯ç›¸å¯¹å›ºå®šçš„ï¼Œå‡†ç¡®ç‚¹è¯´æ˜¯æ¯ä¸ªcellçš„é«˜åº¦æ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆheightForRowæ˜¯ä¸å»ºè®®è®©ä»£ç†åŽ»å®žçŽ°çš„ï¼Œè€Œæ˜¯é€šè¿‡tableViewçš„rowHeightå±žæ€§æ¥ä»£æ›¿ï¼Œå½“æ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œæ¯”å¦‚è¯´æœ‰10000ä¸ª(å…¶å®žåªè¦ &gt;= 2)cellæ—¶ï¼ŒtableViewåªéœ€è¦10000*rowHeightå°±çŸ¥é“åº”è¯¥å‡†å¤‡çš„ç©ºé—´å¤§å°äº†ï¼Œè€Œä¸æ˜¯è°ƒç”¨ä¸€ä¸ªæ–¹æ³•10000æ¬¡é€šè¿‡ç´¯åŠ èŽ·çŸ¥éœ€è¦çš„å¤§å°ã€‚è€Œä¸”ä½ æ‡‚çš„ï¼Œè¦æƒ³èŽ·å–ä¸€ä¸ªcellçš„é«˜åº¦å¹¶ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“çš„äº‹ï¼Œå°¤å…¶æ˜¯åœ¨è‡ªåŠ¨å¸ƒå±€å‡ºçŽ°ä¹‹å‰ï¼Œä½ éœ€è¦è®¡ç®—å„ç§å­—ç¬¦ä¸²çš„æ‰€å ç©ºé—´çš„å¤§å°ï¼Œè¿™å¯¹æ€§èƒ½æ˜¯ç›¸å½“å¤§çš„æŸè€—ã€‚ å¦‚æžœæ¯ä¸ªcellé«˜åº¦ç¡®å®žä¸ä¸€æ ·ï¼Œæ•°æ®é‡åˆå¾ˆå¤§æ—¶è¯¥æ€Žä¹ˆè§£å†³è¿™ä¸ªæ€§èƒ½é—®é¢˜å‘¢ï¼ŒiOS7ä¹‹åŽç³»ç»Ÿæä¾›äº†ä¼°ç®—é«˜åº¦çš„åŠžæ³•ï¼ŒestimatedRowHeightå’Œ- (CGFloat)tableView:(UITableView *)tableView estimatedHeightForRowAtIndexPath:(NSIndexPath *)indexPath//ä¸‹æ–‡å†æåˆ°è¯¥æ–¹æ³•ç”¨estimateHeightForRowä»£æ›¿,è¿™æ ·æ¯æ¬¡åœ¨åŠ è½½æ•°æ®ä¹‹å‰ï¼ŒtableViewä¸å†é€šè¿‡heightForRowæ¶ˆè€—å¤§é‡çš„æ€§èƒ½èŽ·å–ç©ºé—´å¤§å°äº†ï¼Œè€Œæ˜¯é€šè¿‡åœ¨estimateRowHeightæˆ–è€…estimatedHeightForRowä¸éœ€è¦è´¹åŠ²è®¡ç®—å°±èƒ½èŽ·å–çš„ä¸€ä¸ªä¼°ç®—å€¼æ¥èŽ·å–ä¸€ä¸ªå¤§ä½“çš„ç©ºé—´å¤§å°ï¼Œç­‰åˆ°çœŸæ­£çš„åŠ è½½æ•°æ®æ—¶æ‰æ ¹æ®èŽ·å–çœŸå®žæ•°æ®ï¼Œå¹¶åšå‡ºç›¸åº”çš„è°ƒæ•´ï¼Œæ¯”å¦‚contentSizeæˆ–è€…scrollIndicatorçš„ä½ç½®ã€‚å…³äºŽåŠ¨æ€è®¡ç®—é«˜åº¦ï¼ŒæŽ¨èç¾Šæ•™æŽˆçš„ä¸€ç¯‡æ–‡ç« ä¼˜åŒ–UITableViewCellé«˜åº¦è®¡ç®—çš„é‚£äº›äº‹ è¿™äº›æ–¹æ³•çš„è°ƒç”¨åœ¨ä¿è¯å¤§é¡ºåºä¸å˜çš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªæ–¹æ³•çš„è°ƒç”¨æ¬¡æ•°æ˜¯ä¸ä¸€å®šçš„ï¼Œæ¯ä¸ªiOSç‰ˆæœ¬åˆä¸ä¸€æ ·ï¼Œä½ å¦‚æžœæƒ³çŸ¥é“å¯ä»¥åŠ¨æ‰‹åŽ»è¯•éªŒä¸€ä¸‹ã€‚å°¤å…¶æ˜¯åœ¨iOS8,å®ƒè®¤ä¸ºcellä¼šéšæ—¶å˜åŒ–ï¼Œæ‰€ä»¥ä¸€æ»‘åŠ¨å°±é‡æ–°è®¡ç®—cellçš„é«˜åº¦ã€‚ è¿™äº›æ–¹æ³•çš„è°ƒç”¨å…¶å®žä¹Ÿæ˜¯æœ‰æ’æ›²çš„ï¼Œæ¯”å¦‚è°ƒç”¨äº†reloadDataä¹‹åŽï¼ŒtableViewåªä¼šè°ƒç”¨èƒ½è®©å®ƒçŸ¥é“æ‰€éœ€ç©ºé—´å¤§å°çš„ä»£ç†æ–¹æ³•ï¼Œç„¶åŽç«‹é©¬æ‰§è¡ŒreloadDataä¹‹åŽçš„è¯­å¥ï¼Œä¹Ÿå°±è¯´cellForRowå¹¶ä¸ä¼šåœ¨reloadDataä¹‹åŽç´§æŽ¥ç€æ‰§è¡Œã€‚æ‰€ä»¥reloadDataä¹‹åŽå°½é‡é¿å…å¯¹æ•°æ®æºæ•°ç»„çš„æ“ä½œã€‚ å¤ç”¨æœºåˆ¶äº†è§£UITableViewçš„äººè‚¯å®šå¯¹è¿™ä¸€è‘—åç‰¹æ€§å¤šå°‘æœ‰ç‚¹äº†è§£ã€‚å’±ä»¬å…ˆå‡è®¾UITableViewæ²¡æœ‰å¤ç”¨æœºåˆ¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦å±•ç¤º10000æ¡æ•°æ®çš„è¯ï¼Œé‚£å°±å¾—ç”Ÿæˆ10000ä¸ªUITableViewCell,å ç”¨äº†å¤§é‡å†…å­˜ä¸è¯´ï¼Œæ€§èƒ½ä¹Ÿå¯æƒ³è€ŒçŸ¥äº†ï¼Œå¿…ç„¶æ˜¯ä¸€æ»‘ä¸€å¡é¡¿ï¼Œä¸€é¡¿ä¸€æš´æ€’å•Šï¼ŒæŽ§åˆ¶åŠ›å¼±çš„ä¼°è®¡è¦æ‘”æ‰‹æœºäº†ã€‚ å¤ç”¨æœºåˆ¶å¤§ä½“æ˜¯è¿™æ ·:UITableViewé¦–å…ˆåŠ è½½ä¸€å±å¹•(å‡è®¾UITableViewçš„å¤§å°æ˜¯æ•´ä¸ªå±å¹•çš„å¤§å°)æ‰€éœ€è¦çš„UITableViewCell,å…·ä½“ä¸ªæ•°è¦æ ¹æ®æ¯ä¸ªcellçš„é«˜åº¦è€Œå®šï¼Œæ€»ä¹‹è‚¯å®šè¦é“ºæ»¡æ•´ä¸ªå±å¹•,æ›´å‡†ç¡®è¯´å½“å‰åŠ è½½çš„cellçš„é«˜åº¦è¦å¤§äºŽå±å¹•é«˜åº¦ã€‚ç„¶åŽä½ å¾€ä¸Šæ»‘åŠ¨ï¼Œæƒ³è¦æŸ¥çœ‹æ›´å¤šçš„å†…å®¹ï¼Œé‚£ä¹ˆè‚¯å®šéœ€è¦ä¸€ä¸ªæ–°çš„cellæ”¾åœ¨å·²ç»å­˜åœ¨å†…å®¹çš„ä¸‹è¾¹ã€‚è¿™æ—¶å€™å…ˆä¸åŽ»ç”Ÿæˆï¼Œè€Œæ˜¯å…ˆåŽ»UITableViewè‡ªå·±çš„ä¸€ä¸ªèµ„æºæ± é‡ŒåŽ»èŽ·å–ã€‚è¿™ä¸ªèµ„æºæ± é‡Œæ”¾äº†å·²ç»ç”Ÿæˆçš„è€Œä¸”èƒ½ç”¨çš„cellã€‚å¦‚æžœèµ„æºæ± æ˜¯ç©ºçš„è¯æ‰ä¼šä¸»åŠ¨ç”Ÿæˆä¸€ä¸ªæ–°çš„cellã€‚é‚£ä¹ˆè¿™ä¸ªèµ„æºæ± é‡Œçš„cellåˆæ¥è‡ªå“ªé‡Œå‘¢ï¼Ÿå½“ä½ æ»‘åŠ¨æ—¶è§†å›¾æ˜¯ï¼Œä½äºŽæœ€é¡¶éƒ¨çš„cellä¼šç›¸åº”çš„å¾€ä¸Šæ»‘åŠ¨ï¼Œç›´åˆ°å®ƒå½»åº•æ¶ˆå¤±åœ¨å±å¹•ä¸Šï¼Œæ¶ˆå¤±çš„cellåŽ»äº†å“ªé‡Œå‘¢ï¼Ÿä½ è‚¯å®šæƒ³åˆ°äº†ï¼Œæ˜¯çš„ï¼Œå®ƒè¢«UITableViewæ”¾åˆ°èµ„æºæ± é‡Œäº†ã€‚å…¶ä»–cellä¹Ÿæ˜¯è¿™æ ·ï¼Œåªè¦ä¸€æ»‘å‡ºå±å¹•å°±æ”¾å…¥èµ„æºæ± ã€‚è¿™æ ·ï¼Œæœ‰è¿›æœ‰å‡ºï¼Œæ€»å…±éœ€è¦å¤§çº¦ä¸€å±å¹•å¤šä¸€ç‚¹çš„cellå°±å¤Ÿäº†ã€‚ç›¸å¯¹äºŽ1000æ¥è¯´èŠ‚çœçš„èµ„æºå°±æ˜¯æŒ‡æ•°çº§å•Šï¼Œå®Œç¾Žè§£å†³äº†æ€§èƒ½é—®é¢˜ã€‚ iOS6ä¹‹åŽæˆ‘ä»¬ä¸€èˆ¬åœ¨ä»£ç é‡Œè¿™æ ·å¤„ç†cell å…ˆæ³¨å†Œ [self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@&quot;UITableViewCell&quot;]; æˆ– [self.tableView registerNib:[UINib nibWithNibName:@&quot;NibTableViewCell&quot; bundle:nil] forCellReuseIdentifier:@&quot;NibTableViewCell&quot;]; åœ¨ä»£ç†æ–¹æ³•é‡ŒèŽ·å– - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{ UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@&quot;UITableViewCell&quot; forIndexPath:indexPath]; // do something return cell; } é‚£ä¹ˆå…·ä½“åœ¨ä»£ç é‡Œæ˜¯æ€Žä¹ˆå®žçŽ°çš„å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å¤§èƒ†çš„çŒœæµ‹ä¸€ä¸‹ã€‚ UITableViewæœ‰å‡ ä¸ªå±žæ€§(å‡æƒ³çš„)ï¼š NSMutableDictionary *registerCellInfo; NSMutableDictionary *reusableCellsDictionary; NSMutableArray *visibleCells; æˆ‘ä»¬æŽ¨æµ‹ä¸¤ä¸ªæ³¨å†Œæ–¹æ³•çš„å®žçŽ° - (void)registerNib:(UINib *)nib forCellReuseIdentifier:(NSString *)identifier{ [self.registerCellInfo setObject:nib forKey:identifier]; [self.registerCellsDictionary setObject:[NSMutableArray array] forKey:identifier]; } - (void)registerClass:(Class)cellClass forCellReuseIdentifier:(NSString *)identifier{ [self.registerCellInfo setObject:cellClass forKey:identifier]; [self.registerCellsDictionary setObject:[NSMutableArray array] forKey:identifier]; } ç„¶åŽæŽ¨æµ‹æœ€å…³é”®çš„èŽ·å–æ–¹æ³• - (UITableViewCell *)dequeueReusableCellWithIdentifier:(NSString *)identifier forIndexPath:(NSIndexPath *)indexPath{ //indexPathè¿™ä¸ªå‚æ•°æ˜¯ä¸ºäº†é‡ç½®`cell`çš„å¤§å°ï¼Œç›¸å…³çš„å¤„ç†å¹¶ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œæ‰€ä»¥æš‚ä¸å®žçŽ° NSMutableArray *array = self.reusableCellsDictionary[identifier]; UITableViewCell *cell = nil; if(array.count){ cell = array.lastObject; [self.visibleCells addObject:cell]; [array removeLastObject]; }else{ id obj = self.registerCellInfo[identifier]; if([obj isKindOfClass:[UINib class]]){ cell = [[((UINib *)obj) instantiateWithOwner:nil options:nil] lastObject]; }else{ cell = [[(Class)obj alloc] init]; } if(cell){ [self.visibleCells addObject:cell]; } } return cell; } ðŸ˜‚ï¼Œè¯·å¿½ç•¥ä»¥ä¸Šæ‰€æœ‰æŽ¨æµ‹æ–¹æ³•çš„ä¸ä¸¥è°¨ï¼Œè®¸å¤šè¯¥æœ‰çš„æ¡ä»¶åˆ¤æ–­å¹¶æ²¡æœ‰åŽ»å¤„ç†ã€‚ä½†æ˜¯å†™åˆ°è¿™é‡Œç›¸ä¿¡äº²çˆ±çš„è¯»è€…å·²ç»äº†è§£äº†UITableViewå¤ç”¨æœºåˆ¶çš„åŽŸç†äº†ã€‚çŽ°åœ¨ï¼Œä½ å·²ç»å…·å¤‡äº†è‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªUITableViewçš„åŸºç¡€äº†(å½“ç„¶ï¼Œå‡è®¾ä½ å·²ç»å¯¹UIScrollViewæœ‰äº†å……è¶³çš„äº†è§£)ã€‚å¦‚æžœæˆ‘çš„æ–‡ç« å¯¹ä½ æœ‰ç”¨ï¼Œçƒ¦è¯·ç‚¹ä¸ªå–œæ¬¢ï¼Œå¥½æ¿€åŠ±æˆ‘ç»§ç»­å†™ä¸‹åŽ»ã€‚ã€‚ã€‚ å…³äºŽUITableViewçš„æ›´å¤šçŸ¥è¯†æˆ‘ä»¬åŽç»­å†è°ˆ]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>UITableView</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå­¦ä¹ ç¬”è®°]]></title>
    <url>%2F2018%2F11%2F09%2FiOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[autoLayout Autolayoutçš„ä½œç”¨éžå¸¸æ˜Žç¡®ï¼šå¸®æˆ‘ä»¬ç¡®å®šåœ¨ä¸åŒè®¾å¤‡ã€ä¸åŒï¼ˆçˆ¶viewï¼‰çŽ¯å¢ƒä¸‹ï¼ŒåŒä¸€ä¸ªå¯è§†å•å…ƒæ‰€åº”å…·æœ‰åˆé€‚çš„ä½ç½®å’Œå°ºå¯¸ï¼Œå› æ­¤ï¼Œå½“ä¸€ä¸ªUIViewä¸Šæ‰€æ–½åŠ çš„çº¦æŸèƒ½å¤Ÿå”¯ä¸€ç¡®å®šå®ƒçš„frameï¼ˆx, y, width, heightï¼‰çš„æ—¶å€™æˆ‘ä»¬çš„è‡ªåŠ¨å¸ƒå±€çš„ä½¿ç”¨æ‰æ˜¯æ­£ç¡®çš„ã€‚è€Œæ–°æ‰‹é€šå¸¸çŠ¯çš„ä¸¤ç±»é”™è¯¯å°±æ˜¯çº¦æŸä¸è¶³ï¼ˆçº¦æŸå¤ªå°‘ï¼‰å’Œçº¦æŸå†²çªä¸¤ç§ï¼ˆçº¦æŸå¤ªå¤šï¼‰ã€‚å¦‚æžœä½ ç»™å‡ºçš„çº¦æŸåªèƒ½å¤Ÿç¡®å®šè¿™ä¸ªviewçš„å¤§å°ï¼Œæˆ–è€…ä½ç½®æˆ–è€…ä½ç½®ä¸­çš„æŸä¸€ä¸ªé¡¹ï¼ˆæ¯”å¦‚xï¼‰çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºçŽ°çº¦æŸä¸è¶³çš„æƒ…å†µï¼Œåœ¨xibæˆ–è€…storyboardä¸­ï¼Œä¼šä»¥é»„è‰²çš„è­¦å‘Šå‡ºçŽ°åœ¨å·¦ä¾§æç¤ºæ¡†å†…ï¼›å¦‚æžœä½ ç»™å‡ºçš„çº¦æŸæŽ¨å¯¼å‡ºäº†ä¸¤ä¸ªç”šè‡³å¤šä¸ªäº’ç›¸çŸ›ç›¾çš„ä½ç½®å°ºå¯¸ç»“æžœçš„æ—¶å€™ï¼Œå°±äº§ç”Ÿäº†å¸ƒå±€é”™è¯¯ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™ç›´æŽ¥å°±buildä¸è¿‡ã€‚ åœ¨ç”»å¸ƒä¸­è§’åº¦æ˜¯é¡ºæ—¶é’ˆè½¬çš„ å¼•ç”¨ åœ¨ç»˜åˆ¶çš„æ–¹æ³•ä¸­ï¼Œä½¿ç”¨ UIGraphicsBeginImageContextWithOptions æ¥å–ä»£ UIGraphicsGetCurrentContext å‡ºå¤„ åº”ç”¨é—´ç›¸äº’è°ƒç”¨åªè¦çŸ¥é“åŒæ–¹è®¾ç½®å¥½çš„URLå°±è¡Œäº†ï¼Œæ‰“å¼€å¦ä¸€ä¸ªåº”ç”¨æ—¶å¯ä»¥æŠŠå½“å‰åº”ç”¨çš„URLä¼ è¿‡åŽ»ï¼Œè¦æ‰“å¼€çš„åº”ç”¨å°±å¯ä»¥æ ¹æ®å“åº”çš„ä»£ç å°±å¯ä»¥è®©ç”¨æˆ·è§¦å‘è¿”å›žåŽŸå§‹åº”ç”¨äº† äº‹ä»¶çš„å“åº”é“¾æ˜¯ä»Žå­è§†å›¾åˆ°çˆ¶è§†å›¾å±‚å±‚ä¼ é€’çš„ï¼Œæ¨¡å¼æ˜¯å­è§†å›¾è°ƒç”¨çˆ¶è§†å›¾ç›¸åŒçš„æ–¹æ³•ï¼ˆ[super XXX]ï¼‰ï¼Œæ‰€ä»¥è§¦å‘è¯¥äº‹ä»¶çš„å…ˆåŽé¡ºåºåº”è¯¥æ˜¯ä»Žçˆ¶è§†å›¾åˆ°å­è§†å›¾ï¼Œå½“ç„¶è¿™æ˜¯é»˜è®¤æƒ…å†µï¼Œå¦‚æžœä½ é‡å†™äº†äº‹ä»¶æ–¹æ³•ï¼Œå°±å¯ä»¥æŽ§åˆ¶æ˜¯å¦æŠŠäº‹ä»¶ä¼ é€’ç»™çˆ¶è§†å›¾ï¼Œæˆ–è€…å“ªä¸ªè§†å›¾å…ˆè§¦å‘äº‹ä»¶ä¸Šé¢çš„ç†è§£è²Œä¼¼ä¸å¤Ÿå‡†ç¡®ï¼Œé‡æ–°æ•´ç†å¦‚ä¸‹ï¼š. äº‹ä»¶é“¾çš„å»ºç«‹ ç®€å•è®²æ˜¯å‘ç”Ÿåœ¨addSubViewæ—¶ï¼Œè¢«æ·»åŠ çš„è§†å›¾çš„nextResponder(ä¸‹ä¸€ä¸ªå“åº”è€…)å°±æ˜¯å®ƒçš„çˆ¶è§†å›¾ã€‚å¦‚æžœä¸€ä¸ªveiw(ä¸‹é¢ç®€ç§°A)ä¸æ˜¯æ™®é€šçš„viewï¼Œå®ƒæ˜¯æŸä¸ªviewcontrollerçš„æ ¹veiw,é‚£ä¹ˆAçš„nextResponderåœ¨Aä»Žåˆå§‹åŒ–å®ŒåŽå°±èµ‹å€¼ä¸ºviewControllerã€‚ç„¶åŽå½“Aè¢«addsubviewåˆ°rootviewçš„æ—¶å€™(addChildViewControlleræ—¶ä¼šå‘ç”Ÿ)ï¼ŒController Açš„nextresponderè¢«å¤åˆ¶ä¸ºrootviewã€‚. äº‹ä»¶çš„ä¼ é€’ å½“ç”¨æˆ·è§¦æ‘¸æ—¶ï¼ŒUIKitå…ˆåˆ›å»ºä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼ŒåŠ åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­åŽ»ï¼Œç„¶åŽUIAPPlicationä»Žä¸­å–å‡ºæ¥ï¼Œä»Žwindowå¼€å§‹æŸ¥æ‰¾ï¼Œå‘çŽ°ç‚¹å‡»ä½ç½®åœ¨windowçš„èŒƒå›´å†…ï¼Œé‚£å°±ç»§ç»­æŸ¥æ‰¾windowçš„subViews,ç›´åˆ°æ‰¾åˆ°è§†å›¾æ ‘æœ€é¡¶éƒ¨çš„å¶å­è§†å›¾ï¼Œç„¶åŽæŠŠäº‹ä»¶äº¤ç»™è¿™ä¸ªé¡¶éƒ¨è§†å›¾ï¼Œè§†å›¾å¤„ç†äº‹ä»¶ï¼Œå¦‚æžœä¸å¤„ç†å°±äº¤ç»™å®ƒçš„nextResponser,å±‚å±‚å¾€ä¸‹ï¼Œç›´åˆ°windowå†åˆ°UIApplacationã€‚ åƒç´ å°±æ˜¯ä¸€ä¸ªå°ç‚¹ï¼Œpxå°±è¡¨ç¤ºä¸€ä¸ªçœŸæ­£çš„ç‚¹ï¼Œptå°±æ˜¯æ ‡å‡†ä¸­å®šå¥½çš„æœ‰å¤§å°çš„ç‚¹,1/72è‹±å¯¸,åˆ†è¾¨çŽ‡æ˜¯æŒ‡æŒ‡æ¯å•ä½é¢ç§¯ï¼ˆå¹³æ–¹è‹±å¯¸ï¼‰åƒç´ çš„ä¸ªä¸ªæ•°ï¼Œå³dpi,ä¹‹æ‰€ä»¥è°ˆåˆ°å…·ä½“çš„è®¾å¤‡æ—¶ç»å¸¸ç”¨W*Hè¡¨ç¤ºåˆ†è¾¨çŽ‡ï¼Œæ˜¯ç”¨äº†å½“å‰è®¾å¤‡çš„é•¿å®½æ–¹å‘ä¸Šçš„åƒç´ é™¤ä»¥å½“å‰è®¾å¤‡ç›¸åº”çš„å°ºå¯¸ devicesåªæœ‰é€‰æ‹©äº†universal(é€šç”¨)æ‰å¯ä»¥è®©iPhoneå’ŒiPadå…±ç”¨ç•Œé¢æˆ–è€…è¯´ä¸åŒå°ºå¯¸çš„è®¾å¤‡å…±ç”¨ç•Œé¢ IQKeyboardManager å¿…é¡»æ˜¯åœ¨pushæˆ–è€…presentçš„VCçš„è§†å›¾ä¸Šæ‰å¯ä»¥è‡ªåŠ¨è°ƒæ•´ä½ç½® äº‹åŽé—®è¿‡ä½œè€…ï¼Œè¯´æ€Žä¹ˆéƒ½å¯ä»¥ï¼Œä½†æ˜¯æˆ‘ç”¨çš„ç‰ˆæœ¬å´å®žä¸è¡Œï¼Œä½œè€…ç»™æ„è§ï¼Œå¯ä»¥è€ƒè™‘addChildViewCOntroller ä»ŽUINavigationControlleré‡Œå‡ºæ¥çš„UIViewControlleræ— æ³•ä¸ä¼šæ‰§è¡ŒshouldAutorotate,è¿™ç§æƒ…å†µå¿…é¡»è‡ªå®šä¹‰ä¸€ä¸ªç»§æ‰¿UINavigationControllerçš„ç±» è¦å®žçŽ°UITableViewCellçš„ç¼–è¾‘å¿…é¡»å®žçŽ°ä¸‹é¢ä¸¤ä¸ªæ–¹æ³• (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath; (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath; å…³äºŽå †æ ˆçš„ç†è§£ ï¼šæ ˆ â€” æˆ˜æ­» æ ˆæ˜¯æ­»çš„ï¼Œä¸€èˆ¬æ˜¯æå‰åˆ†é…å¥½çš„ï¼Œé™¤éžä½ mallocå‡ºæ¥ï¼Œå †çš„å¯æŽ§æ€§å°±æ¯”è¾ƒå¼ºï¼Œä¹Ÿå°±æ˜¯è‡ªå·±æŽ§åˆ¶å®ƒçš„åˆ›å»ºï¼Œå½“ç„¶å®ƒçš„æ¶ˆäº¡ä¹Ÿåº”è¯¥ä½ æ¥æŽ§åˆ¶ä¸¾ä¸ªå°æ —ï¼šåœ¨ä¸€ä¸ªå‡½æ•°ä¸­å®šä¹‰äº† NSArray *a = [[NSArray alloc] init] aæ˜¯ä¸ªæŒ‡é’ˆï¼Œä»–å°±æ˜¯æ”¾åœ¨æ ˆä¸­çš„ï¼Œä½†æ˜¯å®ƒæŒ‡å‘çš„é‚£ä¸ªæ•°ç»„å°±æ˜¯å­˜åœ¨å †ä¸­çš„ã€‚ objective-cå› ä¸ºå­—ç¬¦ä¸²æ¯”è¾ƒç‰¹æ®Šï¼Œæ‰€ä»¥åœ¨å†™æ­£åˆ™çš„æ—¶å€™ï¼Œç¢°åˆ°è½¬ä¹‰å­—ç¬¦å¿…é¡»å¤šåŠ ä¸€ä¸ªâ€\\â€ï¼Œæ¯”å¦‚ï¼šå…¨æ•°å­—å­—ç¬¦ï¼š@â€^\\\\d\\+$â€ UITableViewç«Ÿç„¶è¢«æˆ‘å‘çŽ°äº†ä¸€ä¸ªæ–°ç”¨æ³•ï¼ˆå½“ç„¶è¿™ä¸ªç”¨æ³•æ˜¯æ—§çš„ï¼‰ï¼Œå®ƒåœ¨ç¼–è¾‘çŠ¶æ€ä¸‹å¯ä»¥å·¦è¾¹æ˜¾ç¤ºåœ†åœˆï¼ŒdidSelectedä¼šè‡ªåŠ¨é€‰ä¸­ï¼Œå†æŒ‰ä¸€æ¬¡didDeselectä¼šè‡ªåŠ¨æ¶ˆå¤± ä¸‹é¢è¿™å¥è¯çš„æ„æ€æ˜¯èŽ·å–aViewåœ¨windowä¸­çš„ä½ç½®ï¼Œæ³¨æ„æœ€å‰è¾¹æ˜¯aViewçš„çˆ¶è§†å›¾ [aView.superview convertPoint:aView.frame.origin toView:nil]; UIViewä¸èƒ½åŒäº‹åŠ å¤šä¸ªç”±makeç”Ÿæˆçš„transform,å¦‚æžœåŠ å¤šä¸ªï¼Œç¬¬äºŒä¸ªåº”è¯¥ç”¨åŽŸå§‹æ–¹æ³•ï¼Œå¦‚ä¸‹ self.contentViewContainer.transform = CGAffineTransformMakeTranslation(point.x, 0); self.contentViewContainer.transform = CGAffineTransformScale(self.contentViewContainer.transform,scale, scale); extern æ˜¯è¡¨æ˜Žè¿™ä¸ªè¿™ä¸ªå˜é‡æ˜¯å…¨å±€çš„ï¼Œåœ¨å…¶ä»–ç±»é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ä¸ªå˜é‡ä¸å¿…æŠŠé¦–æ¬¡å£°æ˜Žè¿™ä¸ªå˜é‡çš„ç±»å¼•å…¥å°±è¡Œï¼Œä½†æ˜¯å¿…é¡»å¾—å†æ¬¡å£°æ˜Žï¼Œstaticæ˜¯ä»…é™äºŽæ­¤ç±»é‡Œä½¿ç”¨ï¼Œå…¶ä»–ç±»è¦æƒ³ä½¿ç”¨å¿…é¡»å¼•å…¥è¯¥ç±» å›¾ç‰‡çš„åæ ‡åŽŸç‚¹åœ¨å·¦ä¸‹è§’ å…³äºŽåˆ·æ–°å­è§†å›¾ -layoutSubviewsæ–¹æ³•ï¼šè¿™ä¸ªæ–¹æ³•ï¼Œé»˜è®¤æ²¡æœ‰åšä»»ä½•äº‹æƒ…ï¼Œéœ€è¦å­ç±»è¿›è¡Œé‡å†™-setNeedsLayoutæ–¹æ³•ï¼š æ ‡è®°ä¸ºéœ€è¦é‡æ–°å¸ƒå±€ï¼Œå¼‚æ­¥è°ƒç”¨layoutIfNeededåˆ·æ–°å¸ƒå±€ï¼Œä¸ç«‹å³åˆ·æ–°ï¼Œä½†layoutSubviewsä¸€å®šä¼šè¢«è°ƒç”¨-layoutIfNeededæ–¹æ³•ï¼šå¦‚æžœï¼Œæœ‰éœ€è¦åˆ·æ–°çš„æ ‡è®°ï¼Œç«‹å³è°ƒç”¨layoutSubviewsè¿›è¡Œå¸ƒå±€ï¼ˆå¦‚æžœæ²¡æœ‰æ ‡è®°ï¼Œä¸ä¼šè°ƒç”¨layoutSubviewsï¼‰å¦‚æžœè¦ç«‹å³åˆ·æ–°ï¼Œè¦å…ˆè°ƒç”¨[view setNeedsLayout]ï¼ŒæŠŠæ ‡è®°è®¾ä¸ºéœ€è¦å¸ƒå±€ï¼Œç„¶åŽé©¬ä¸Šè°ƒç”¨[view layoutIfNeeded]ï¼Œå®žçŽ°å¸ƒå±€ æˆ‘å‹’ä¸ªåŽ»å“Žï¼Œself.navigationController.toolbarHidden = NO è¿™æ ·å¯ä»¥åœ¨Viewä¸‹è¾¹æœ‰æ˜¾ç¤ºä¸€ä¸ªtoolbarå“Žï¼Œè¿™ä¸ªæ˜¯å¯ä»¥åˆ©ç”¨çš„å“Ÿï¼Œå®Œæˆä»»åŠ¡å¿…é¡»æŠ½æ—¶é—´å¥½å¥½ç ”ç©¶ä¸€ç•ªï¼Œæ–°å‘çŽ°å•Š ä¸‹é¢çš„ä»£ç è¾“å‡ºä»€ä¹ˆ @implementation Son : Father - (id)init{ self = [super init]; if (self) { NSLog(@&quot;%@&quot;, NSStringFromClass([self class])); NSLog(@&quot;%@&quot;, NSStringFromClass([super class])); } return self; } @end ç­”æ¡ˆï¼šéƒ½è¾“å‡ºâ€Sonâ€è§£é‡Šï¼šobjcä¸­superæ˜¯ç¼–è¯‘å™¨æ ‡ç¤ºç¬¦ï¼Œå¹¶ä¸åƒselfä¸€æ ·æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡åˆ°å‘superå‘çš„æ–¹æ³•æ—¶ä¼šè½¬è¯‘æˆobjc_msgSendSuper(â€¦)ï¼Œè€Œå‚æ•°ä¸­çš„å¯¹è±¡è¿˜æ˜¯selfï¼ŒäºŽæ˜¯ä»Žçˆ¶ç±»å¼€å§‹æ²¿ç»§æ‰¿é“¾å¯»æ‰¾- classè¿™ä¸ªæ–¹æ³•ï¼Œæœ€åŽåœ¨NSObjectä¸­æ‰¾åˆ°ï¼ˆè‹¥overrideï¼‰æ­¤æ—¶ï¼Œ[self class]å’Œ[super class]å·²ç»ç­‰ä»·äº†ã€‚ æ‰€ä»¥ï¼Œå­ç±»è°ƒç”¨çˆ¶ç±»çš„æŸä¸ªæ–¹æ³•ï¼Œçˆ¶ç±»çš„è¿™ä¸ªæ–¹æ³•åˆè°ƒç”¨äº†ä¸€ä¸ªè·Ÿå­ç±»æœ‰ç›¸åŒåå­—çš„æŸä¸ªæ–¹æ³•ï¼Œç›¸å½“äºŽå­ç±»ç›´æŽ¥è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³• UITextFieldæ˜¯æœ‰leftViewå’ŒrightViewçš„ï¼Œå¯ä»¥åˆ©ç”¨leftViewåœ¨æ·»åŠ äº†èƒŒæ™¯å›¾ç‰‡åŽæ·»åŠ å·¦è¾¹ç•™ç™½ï¼Œä½†æ˜¯å¾—æ³¨æ„è¦è®¾ç½®å±žæ€§ leftViewMode = UITextFieldViewModeAlways loadæ–¹æ³•ä¼šåœ¨ç±»å®žä¾‹è¯çš„æ—¶å€™è°ƒç”¨ï¼Œå¦‚æžœè¦ç”¨runtimeé»‘é­”æ³•çš„è¯å°±å¯ä»¥åœ¨è¿™é‡Œç”¨ã€‚initializeræ–¹æ³•ä¼šåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨è¯¥ç±»çš„æ–¹æ³•æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå±žäºŽæ‡’åŠ è½½ UITableViewçš„headeræ˜¯searchBarçš„æ—¶å€™æ‹–æ‹½æ—¶searchBarèƒŒæ™¯ä¼šè¢«æ‹‰ä¼¸ è§†å›¾æŽ§åˆ¶å™¨åˆ‡æ¢æ–¹æ³• - (void)transitionFromViewController:(UIViewController *)fromViewController toViewController:(UIViewController *)toViewController duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion NS_AVAILABLE_IOS(5_0); ä¸ç”¨ä½ å†åŽ»ç»™å®¹å™¨è§†å›¾æ·»åŠ (addSubView)å’Œåˆ é™¤(removeFromSuperView)å­è§†å›¾ï¼Œå®ƒä¼šå¸®ä½ å¤„ç†å¥½ å“ˆå“ˆå“ˆï¼ŒXCodeå¥½å‚»å“Ÿï¼Œå¦‚æžœä½ åœ¨.mæ–‡ä»¶é‡Œæå‰æœ‰äº† setXå’Œxæ–¹æ³•ï¼Œç„¶åŽæ‰åœ¨.hæ–‡ä»¶é‡Œç”¨@propertyå£°æ˜Žxå±žæ€§ï¼Œ.mé‡Œå°±ä¸å…è®¸ä½ ä½¿ç”¨_xè¿™ä¸ªå˜é‡ã€‚æ­¤æ—¶ï¼Œ@synthesize å°±æ´¾ä¸Šäº†ç”¨åœºã€‚@dynamicä¸Ž@synthesizeçš„åŒºåˆ«åœ¨äºŽï¼šä½¿ç”¨@synthesizeç¼–è¯‘å™¨ä¼šç¡®å®žçš„äº§ç”Ÿgetterå’Œsetteræ–¹æ³•ï¼Œè€Œ@dynamicä»…ä»…æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸¤ä¸ªæ–¹æ³•åœ¨è¿è¡ŒæœŸä¼šæœ‰çš„ï¼Œæ— éœ€äº§ç”Ÿè­¦å‘Šã€‚ å‡è®¾æœ‰è¿™ä¹ˆä¸ªåœºæ™¯ï¼ŒBç±»ï¼ŒCç±»åˆ†åˆ«ç»§æ‰¿Aç±»ï¼ŒAç±»å®žçŽ°æŸä¸ªåè®®ï¼ˆ@protocolï¼‰ï¼Œåè®®ä¸­æŸä¸ªå±žæ€§( somePropety )æˆ‘ä¸æƒ³åœ¨Aä¸­å®žçŽ°ï¼Œè€Œåœ¨Bç±»ï¼ŒCç±»ä¸­åˆ†åˆ«å®žçŽ°ã€‚å¦‚æžœAä¸­ä¸å†™ä»»ä½•ä»£ç ï¼Œç¼–è¯‘å™¨å°±ä¼šç»™å‡ºè­¦å‘Šï¼šâ€œuse @synthesize, @dynamic or provide a method implementationâ€è¿™æ—¶ä½ ç»™ç”¨@dynamic somePropety; ç¼–è¯‘å™¨å°±ä¸ä¼šè­¦å‘Šï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šäº§ç”Ÿä»»ä½•é»˜è®¤ä»£ç ã€‚ UITableViewåœ¨ç¼–è¾‘çŠ¶æ€ä¸‹å¦‚æžœæŒ‡å®šç¼–è¾‘æ ·å¼æ˜¯æ·»åŠ å’Œåˆ é™¤ï¼Œå¯ä»¥åœ¨è§†å›¾ä¸Šæ˜¾ç¤ºå¤é€‰æ¡†ï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹æ€§å¯ä»¥æ–¹ä¾¿å®žçŽ°å¤šé€‰ã€‚ - (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath { return UITableViewCellEditingStyleDelete | UITableViewCellEditingStyleInsert; } æ³¨æ„ï¼šä»¥ä¸Šæ˜¯åœ¨UITableViewå•é€‰çš„æƒ…å†µä¸‹ï¼Œå¦‚æžœæ˜¯å¤šé€‰å°±ä¼šè‡ªåŠ¨å‡ºçŽ°å¤é€‰æ¡†ï¼Œä¸ä¼šæ‰§è¡Œä¸Šæ®µä»£ç ã€‚ðŸ˜‚è¯´äº†å¥½å¤šåºŸè¯å“Ÿ UITableViewåœ¨è°ƒç”¨äº†reloadDataä¹‹åŽï¼ŒtableViewä¼šåœ¨è°ƒç”¨å®Œcellçš„é«˜åº¦èŽ·çŸ¥contentSizeä¹‹åŽå°±è°ƒç”¨reloadDataä¹‹åŽçš„è¯­å¥äº†ï¼Œå®Œäº†ä¹‹åŽæ‰åŽ»åŠ è½½cell åœ¨ MRC ä¸‹ï¼Œä½¿ç”¨ block è¯´æ˜Žç¬¦ä¹Ÿå¯ä»¥é¿å…å¾ªçŽ¯å¼•ç”¨ã€‚å› ä¸ºå½“ block ä»Žæ ˆæ‹·è´åˆ°å †æ—¶ï¼Œblock å¯¹è±¡ç±»åž‹çš„å˜é‡ä¸ä¼šè¢« retainï¼Œæ²¡æœ‰ block è¯´æ˜Žç¬¦çš„å¯¹è±¡ç±»åž‹çš„å˜é‡åˆ™ä¼šè¢« retianã€‚æ­£æ˜¯ç”±äºŽ block åœ¨ ARC å’Œ MRC ä¸‹çš„å·¨å¤§å·®å¼‚ï¼Œæˆ‘ä»¬åœ¨å†™ä»£ç æ—¶ä¸€å®šè¦åŒºåˆ†æ¸…æ¥šåˆ°åº•æ˜¯ ARC è¿˜æ˜¯ MRCã€‚ å®žçŽ°ä¸‹é¢çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹ä¸€ä¸ªç±»è¿›è¡Œä½¿ç”¨æƒ³NSArrayå’ŒNSDictionaryé‚£æ ·çš„è¯­æ³•ç³–ç”¨ä¸‹æ ‡æˆ–è€…keyæ¥å­˜å–æ•°æ®äº†, so cool - (id)objectAtIndexedSubscript:(NSUInteger)idx; - (void)setObject:(id)objatIndexedSubscript:(NSUInteger)idx; - (void)setObject:(id)objforKeyedSubscript:(id &lt;NSCopying&gt;)key; - (id)objectForKeyedSubscript:(id)key; CALayerçš„borderæ˜¯å‡ºçŽ°åœ¨layerå†…éƒ¨çš„ï¼Œæ¯”å¦‚è¯´layerWidthä¸º10,é‚£ä¹ˆborderå°±ä¼šå æ®layerçš„contentçš„å››å‘¨å®½åº¦ä¸º10çš„ç©ºé—´ã€‚ ç³»ç»Ÿè§†é¢‘çš„ä¸Šä¼ å¿…é¡»æ‹·è´åˆ°æ²™ç›’ç›®å½•ä¸­æ‰èƒ½ä¸Šä¼ ã€‚ðŸ˜¥ æ‰‹æ’¸NSLayoutConstraintéœ€è¦æ³¨æ„firstItemå’ŒsecondItemçš„é¡ºåº æ³¨æ„äº†ï¼Œæ³¨æ„äº†ï¼ŒkeyWindowä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™ä¼šè¢«ç³»ç»Ÿå¹²æŽ‰ï¼Œæ‰€ä»¥æŠŠhudåŠ åœ¨keyWindowä¸Šçš„æ—¶å€™ä¸€å®šè¦æ³¨æ„å“¦ã€‚æœ€è¿‘é‡åˆ°çš„åœ¨æŠŠmovè½¬æ¢æˆmp4çš„æ—¶å€™ç³»ç»Ÿèµ·äº†ä¸ªå¼‚æ­¥çº¿ç¨‹ï¼Œç„¶åŽkenWindowå°±è¢«å¹²æŽ‰äº†ã€‚ ç”¨CGContextClearRectå°±å¯ä»¥å®žçŽ°ç”»ä¸€å¼ ä¸­é—´é€æ˜Žçš„å›¾ç‰‡äº†ã€‚ æƒ³çŸ¥é“æŸä¸ªå˜é‡åœ¨ç¨‹åºè°ƒè¯•æ—¶çš„çŠ¶æ€ï¼Œå¯ä»¥ç”¨å€ŸåŠ©dispatch_source_t ç›‘æŽ§è°ƒè¯•å¼€å§‹ï¼Œæ‰“å°å˜é‡ from dispatch_queue_t queue = dispatch_get_main_queue(); static dispatch_source_t source = nil; __typeof(self) __weak weakSelf = self; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ source = dispatch_source_create(DISPATCH_SOURCE_TYPE_SIGNAL, SIGSTOP, 0, queue); if (source) { dispatch_source_set_event_handler(source, ^{ NSLog(@&quot;Hi, I am: %@&quot;, weakSelf); }); dispatch_resume(source); // 10 } }); å½“UINavigationController pushæˆ–è€…popæ“ä½œæ—¶NavigationBarå³ä¾§åº•éƒ¨ä¼šå˜ç°ï¼Œè§£å†³è¿™ç§é—®é¢˜éœ€è¦æŠŠæœ€æŽ¥è¿‘å½“å‰vcçš„viewçš„viewçš„èƒŒæ™¯è‰²ä¿®æ”¹ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚ ä¼ä¸šè´¦æˆ· å¾€App Storeä¸Šå‘å¸ƒåº”ç”¨å¿…é¡»æ˜¯Agentè´¦æˆ· ç”¨Xcodeå†™Cï¼Œå³ä½¿ä»…ä»…æœ‰Cä¹Ÿè¦æŠŠCompile Sources Asæ”¹ä¸ºObjective C++ æˆ‘ä¸€ç›´ä»¥ä¸ºä¸‹è¾¹çš„ä»£ç æ˜¯é»˜è®¤çš„ï¼Œç„¶è€Œå¹¶ä¸æ˜¯ï¼Œéœ€è¦æ˜Žç¡®å†™å‡ºæ¥ã€‚ðŸ˜‚self.tableView.rowHeight = UITableViewAutomaticDimension; CALayerå¯¹pathçš„åŠ¨ç”»æ‰§è¡Œå®ŒåŽpathä¸ºåˆå§‹å€¼,å¦‚æžœæƒ³è¦æœ€åŽåœç•™ä½çŠ¶æ€å°±å¯ä»¥æŠŠåˆå§‹å€¼è®¾ä¸ºtoValueçš„å€¼ iOS11çš„æœ¬åœ°é€šçŸ¥è¦æƒ³åœ¨å‰å°æ˜¾ç¤ºå¿…é¡»å®žçŽ°ä»£ç†willPresentçš„æ–¹æ³•,æ–‡æ¡£æœ‰è¯´æ˜Žçš„,è®°ä½ åƒç´ å°±æ˜¯ç»˜ç”»çš„åŸºæœ¬å•å…ƒï¼Œå°±æ˜¯ä¸€ä¸ªæ–¹æ ¼ï¼Œä½†æ˜¯å¹¶ä¸ä¸€å®šæ˜¯ä¸€ä¸ªç‰©ç†ç‚¹ï¼Œåœ¨é«˜æ¸…å±ä¸Šæ˜¯æœ‰å¤šä¸ªåŒ…å«å¤šä¸ªç‰©ç†ç‚¹çš„ã€‚DPIå°±æ˜¯æ¯è‹±å¯¸æœ‰å¤šå°‘ä¸ªåƒç´ ã€‚åˆ†è¾¨çŽ‡åœ¨ç”¨psçš„è®¾è®¡é‚£é‡Œå°±æ˜¯DPIï¼Œä½†æ˜¯ä¸€èˆ¬åœ¨ç§»åŠ¨å¼€å‘é‚£é‡Œå°±æ˜¯å›¾ç‰‡çš„é•¿å®½ã€‚ å…³äºŽåœ¨Swiftä¸­self.propertyå’Œpropertyï¼Œæå€¡ä¸ç”¨selfï¼Œè¿™æ ·å¦‚æžœåœ¨é—­åŒ…ä¸­ä½¿ç”¨çš„å±žæ€§æ˜¯å±žäºŽå½“å‰çš„å®žä¾‹å¯¹è±¡æ—¶ç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ï¼Œä½ å°±å¿…é¡»åŠ ä¸Šselfï¼Œå½“ä½ åŠ ä¸Šselfçš„æ—¶å€™ä½ å°±æ„è¯†åˆ°selfè¦è¢«å¾ªçŽ¯å¼•ç”¨äº†ï¼Œä½ å°±çŸ¥é“è¦å¤„ç†è¿™ä¸ªé—®é¢˜äº†ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ReactiveCocoaè§£è¯»-è®¢é˜…ä¿¡å·]]></title>
    <url>%2F2018%2F11%2F09%2FReactiveCocoa%E8%A7%A3%E8%AF%BB-%E8%AE%A2%E9%98%85%E4%BF%A1%E5%8F%B7%2F</url>
    <content type="text"><![CDATA[ä¿¡å·(Signal)å’Œè®¢é˜…è€…(Subscriber)æ˜¯åœ¨ReactiveCocoa( ä¸‹æ–‡ç®€ç§°RAC)çš„ç›¸å…³èµ„æ–™ä¸­æåˆ°æœ€å¤šçš„æ¦‚å¿µäº†ï¼Œä½†å› ä¸ºæ˜¯ä»Žè‹±æ–‡è¯­å¢ƒä¸­ç›´æŽ¥ç¿»è¯‘è¿‡æ¥çš„ï¼Œè®©å›½å†…å¤§éƒ¨åˆ†å¼€å‘è€…å¯¹è®¢é˜…ä¿¡å·ä¸€æ—¶éš¾ä»¥ç†è§£ï¼Œå³ä½¿æŽŒæ¡äº†RACçš„ç”¨æ³•å¯¹æ­¤è¿˜æ˜¯æ¨¡æ£±ä¸¤å¯ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°è¯•ä»ŽRACçš„æºç åŽ»è§£è¯»ï¼Œçœ‹çœ‹è®¢é˜…ä¿¡å·åˆ°åº•æ˜¯ä¸ªå•¥å­è¿‡ç¨‹ã€‚ å…ˆä¸Šä¸€æ®µRACæœ€ç®€å•çš„ä½¿ç”¨æ–¹æ³•ã€‚ RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) { [subscriber sendNext:@&quot;é’¢é“é”…&quot;]; [subscriber sendNext:@&quot;å«çœ¼æ³ªå–Šä¿®ç“¢é”…&quot;]; [subscriber sendNext:@&quot;åç¼ºçƒ‚è§’çš„æ¢æ–°é”…ç“¢ä¹±æ”¾&quot;]; [subscriber sendNext:@&quot;å“Ž...å“Ž,å“Ž,è°çš„éž‹,ä¸è¦ä¹±æ‰”...&quot;]; return [RACDisposable disposableWithBlock:^{ NSLog(@&quot;æ›²ç»ˆäººæ•£ï¼ŒæŠ¹ç‚¹è¯é…’&quot;); }]; }]; [signal subscribeNext:^(id x) { NSLog(@&quot;æˆ‘å¬åˆ°:%@&quot;,x); }]; ä¿¡å·æ˜¯ä¿¡æ¯çš„è½½ä½“ å¯¹åº”ä¸Šè¾¹çš„ä»£ç ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªä¿¡å· signalï¼Œä»–æ‰¿è½½ç€ é’¢é“é”… å«çœ¼æ³ªå–Šä¿®ç“¢é”… åç¼ºçƒ‚è§’çš„æ¢æ–°é”…ç“¢ä¹±æ”¾ å“Ž...å“Ž,å“Ž,è°çš„éž‹,ä¸è¦ä¹±æ‰”...è¿™äº›ä¿¡æ¯ã€‚ + (RACSignal *)createSignal:(RACDisposable * (^)(id&lt;RACSubscriber&gt; subscriber))didSubscribe { RACDynamicSignal *signal = [[self alloc] init]; signal-&gt;_didSubscribe = [didSubscribe copy]; return [signal setNameWithFormat:@&quot;+createSignal:&quot;]; } åˆ›å»ºä¿¡å·å¾ˆç®€å•ï¼Œå…¶å®žå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªå®žä¾‹å¯¹è±¡ï¼Œå¹¶æŠŠå°†æ¥æœ‰å¯èƒ½è¿›è¡Œçš„ä¸€ç³»åˆ—æ“ä½œdidSubscribeè¿™ä¸ªblockè®°å½•ä¸‹æ¥ï¼Œç­‰å‘ç”Ÿäº†è®¢é˜…è¡Œä¸ºæ—¶å°±ä¼šæ‰§è¡Œè¿™äº›æ“ä½œã€‚æœ‰äººä¼šé—®RACDisposableæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œå…¶å®žä»Žå­—é¢å°±å¯ä»¥ç†è§£ï¼Œé”€æ¯ï¼Œå®ƒå°è£…äº†å½“è®¢é˜…è¡Œä¸ºæ¶ˆå¤±æ—¶ä¸€äº›åº”è¯¥åšçš„æ“ä½œï¼Œå½“ç„¶åƒä¸€å¼€å§‹çš„ä»£ç è¿™ç§åªæ˜¯æ‰“å°æ¶ˆæ¯çš„æ“ä½œå…¶å®žæ˜¯æ²¡å¿…è¦çš„ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥è¿”å›žnilã€‚é‚£ä»€ä¹ˆæ—¶å€™è®¢é˜…è¡Œä¸ºæ¶ˆå¤±å‘¢ï¼Œå½“è®¢é˜…è€…è°ƒç”¨äº†sendError:æˆ–è€…sendCompletedæ–¹æ³•æ—¶è¡¨ç¤ºè®¢é˜…è¡Œä¸ºå°±æ¶ˆå¤±äº†ï¼Œç›¸åº”çš„disposeå°±ä¼šæ‰§è¡Œäº†ï¼Œåšä¸€äº›æ¸…ç†æ“ä½œã€‚å¦‚ä¸‹é¢çš„ä»£ç ï¼š RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) { [subscriber sendNext:@&quot;é’¢é“é”…&quot;]; [subscriber sendNext:@&quot;å«çœ¼æ³ªå–Šä¿®ç“¢é”…&quot;]; [subscriber sendError:[NSError errorWithDomain:@&quot;singing&quot; code:748 userInfo:@{@&quot;reason&quot;:@&quot;éº¦å…‹è¢«æ­Œè¿·æ‹”æŽ‰äº†&quot;}]]; [subscriber sendNext:@&quot;åç¼ºçƒ‚è§’çš„æ¢æ–°é”…ç“¢ä¹±æ”¾&quot;]; [subscriber sendNext:@&quot;å“Ž...å“Ž,å“Ž,è°çš„éž‹,ä¸è¦ä¹±æ‰”...&quot;]; [subscriber sendError:NULL]; // [subscriber sendCompleted]; return [RACDisposable disposableWithBlock:^{ NSLog(@&quot;æ›²ç»ˆäººæ•£ï¼ŒæŠ¹ç‚¹è¯é…’&quot;); }]; }]; å½“ç„¶å¦‚æžœè¿™ä¸¤ä¸ªæ–¹æ³•å¦‚æžœä½ éƒ½ä¸è°ƒç”¨ï¼Œé‚£ä¹ˆå½“è®¢é˜…è€…è¶…å‡ºäº†è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸè°ƒç”¨å…¶deallocæ–¹æ³•æ—¶è¿™ä¸ªdisposeä¹Ÿä¼šæ‰§è¡Œã€‚æ‰€ä»¥RACDisposableåœ¨RACé‡Œä½¿ç”¨éžå¸¸å¹¿æ³›ï¼Œæ¯”å¦‚åœ¨NSNotificationCenterçš„RACæ‰©å±•ä¸­ç”¨äºŽå–æ¶ˆè§‚å¯Ÿè€…ï¼Œåœ¨UITextFieldå’ŒUITextViewçš„æ‰©å±•é‡Œå–æ¶ˆä»£ç†ç­‰ç­‰ã€‚ è¯´äº†åŠå¤©å¤§å®¶å¯èƒ½ä¼šé—®ï¼Œè®¢é˜…è€…åœ¨å“ªé‡Œï¼Ÿåˆ«æ€¥ï¼Œçœ‹ä¸‹é¢: [signal subscribeNext:^(id x) { NSLog(@&quot;æˆ‘å¬åˆ°:%@&quot;,x); }]; å½“è¿™å¥ä»£ç æ‰§è¡Œæ—¶å°±å‘ç”Ÿäº†è®¢é˜…è¡Œä¸ºã€‚å…¶å†…éƒ¨å®žçŽ°æ˜¯è¿™æ ·ï¼š - (RACDisposable *)subscribeNext:(void (^)(id x))nextBlock { NSCParameterAssert(nextBlock != NULL); //çœ‹åˆ°äº†å—ï¼Ÿæˆ‘åœ¨è¿™é‡Œï¼Œæˆ‘å°±æ˜¯è®¢é˜…è€…ã€‚æˆ‘æŠŠ nextBlockä¿å­˜äº†ä¸‹æ¥ã€‚ RACSubscriber *o = [RACSubscriber subscriberWithNext:nextBlock error:NULL completed:NULL]; return [self subscribe:o]; } - (RACDisposable *)subscribe:(id&lt;RACSubscriber&gt;)subscriber { NSCParameterAssert(subscriber != nil); RACCompoundDisposable *disposable = [RACCompoundDisposable compoundDisposable]; //åŠ å·¥äº†ä¸€ä¸‹ï¼Œå˜æˆäº†RACPassthroughSubscriber,å…³äºŽå®ƒçš„ä½œç”¨æˆ‘ä»¬åœ¨ä»¥åŽçš„æ–‡ç« æ€»å…·ä½“åœºæ™¯ä¸‹å†è®²è¿°ï¼ŒçŽ°åœ¨ä½ åªéœ€è®°ä½ä¸€ä¸ªæ›´å…·ä½“çš„RACSubscriberå­ç±»å°±è¡Œäº†ã€‚ subscriber = [[RACPassthroughSubscriber alloc] initWithSubscriber:subscriber signal:self disposable:disposable]; //è¿˜è®°å¾—ä¿¡å·åœ¨ä¸€å¼€å§‹åˆ›å»ºæ—¶å°±å­˜ä¸‹æ¥çš„é‚£ä¸ªblockå—ï¼Œå°±æ˜¯è¿™ä¸ªdidSubscribe if (self.didSubscribe != NULL) { RACDisposable *schedulingDisposable = [RACScheduler.subscriptionScheduler schedule:^{ //åœ¨è¿™é‡Œæ”¯è¡Œäº†ä¿¡å·ä¸€å¼€å§‹åˆ›å»ºçš„blockï¼Œå¹¶èŽ·å¾—äº†å®ƒè¿”å›žçš„RACDisposable RACDisposable *innerDisposable = self.didSubscribe(subscriber); [disposable addDisposable:innerDisposable]; }]; [disposable addDisposable:schedulingDisposable]; } return disposable; } çœ‹åˆ°è¿™é‡Œä½ å¯èƒ½æœ‰äº§ç”Ÿäº†å¾ˆå¤šç–‘é—®ï¼Œä¸”å¬æˆ‘æ…¢æ…¢é“æ¥ã€‚é¦–å…ˆä½ åœ¨å¤´è„‘é‡Œå…ˆäº§ç”Ÿè¿™ä¸ªåœºæ™¯ï¼šç”Ÿæˆäº†ä¸€ä¸ªsubscriber(ä»£å·007)ï¼Œå®ƒä¿å­˜äº†ä¸€ä¸ªnextBlockï¼š^(id x) { NSLog(@&quot;æˆ‘å¬åˆ°:%@&quot;,x);},ç„¶åŽå½“å‰è¿™ä¸ªä¿¡å·å¼€å§‹æ‰§è¡ŒdidSubscribeè¿™ä¸ªblock: ^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) { [subscriber sendNext:@&quot;é’¢é“é”…&quot;]; [subscriber sendNext:@&quot;å«çœ¼æ³ªå–Šä¿®ç“¢é”…&quot;]; [subscriber sendNext:@&quot;åç¼ºçƒ‚è§’çš„æ¢æ–°é”…ç“¢ä¹±æ”¾&quot;]; [subscriber sendNext:@&quot;å“Ž...å“Ž,å“Ž,è°çš„éž‹,ä¸è¦ä¹±æ‰”...&quot;]; [subscriber sendCompleted]; return [RACDisposable disposableWithBlock:^{ NSLog(@&quot;æ›²ç»ˆäººæ•£ï¼ŒæŠ¹ç‚¹è¯é…’&quot;); }]; } æ³¨æ„ï¼Œ007è¢«å½“ä½œå‚æ•°ä¼ äº†è¿›åŽ»ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨sendNext:è¿™ä¸ªæ–¹æ³•çš„éƒ½æ˜¯007ï¼Œè¿˜è®°å¾—007ä¿å­˜çš„é‚£ä¸ªnextBlockå—ï¼Œæ­¤æ—¶åœ¨sendNext:å†…éƒ¨å°±æ˜¯æ‰§è¡Œäº†è¿™ä¸ªnextBlockï¼Œä¼ è¿›åŽ»äº†é’¢é“é”… å«çœ¼æ³ªå–Šä¿®ç“¢é”… åç¼ºçƒ‚è§’çš„æ¢æ–°é”…ç“¢ä¹±æ”¾ å“Ž...å“Ž,å“Ž,è°çš„éž‹,ä¸è¦ä¹±æ‰”...è¿™äº›ä¿¡æ¯ã€‚è¿™æ ·ä½œä¸ºå¼€å‘è€…çš„ä½ å°±æ”¶åˆ°äº†è®¢é˜…è€…å‘ç»™ä½ çš„æœ‰ç”¨ä¿¡æ¯ï¼Œä½ å°±â€œå¬â€åˆ°äº†ä¸€é¦–ç¾Žå¦™çš„æ­Œæ›²ã€‚ æ•´ä¸ªä¸€ä¸ªè®¢é˜…æµç¨‹å°±è¿™æ ·ç»“æŸäº†ï¼Œå½“ç„¶ä½ ä¼šå‘çŽ°åœ¨ä½ çš„ä»£ç ä¸­subscriberå§‹ç»ˆéƒ½æ²¡æš´éœ²å‡ºæ¥ï¼Œè¿™ä¹Ÿæ˜¯é€ æˆä½ ç–‘æƒ‘çš„åŽŸå› ï¼Œé‚£ä¹ˆæˆ‘é—®ä½ ï¼Œä½ éœ€è¦çš„æ˜¯subscriberå‘¢ï¼Œè¿˜æ˜¯subscriberå‘ç»™ä½ çš„ä¿¡æ¯å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬éœ€è¦çš„åªæ˜¯ä¿¡æ¯ï¼Œæ‰€ä»¥å®Œå…¨æ²¡å¿…è¦è®©æˆ‘ä»¬çŸ¥é“subscriberçš„å­˜åœ¨ã€‚æ‰€è°“çš„è®¢é˜…è€…ä¹Ÿå°±æ˜¯subscriberå…¶å®žå°±æ˜¯èµ·äº†ä¸€ä¸ªä¸­é—´äººçš„ä½œç”¨ï¼ŒèŽ·å–ä¿¡å·(æˆ–è€…å«ä¿¡å·æºæ›´å¥½ç†è§£)é‡Œçš„ä¿¡æ¯ï¼Œç„¶åŽå‘é€åˆ°éœ€è¦çš„åœ°æ–¹ã€‚ RACCompoundDisposable(RACDisposableçš„å­ç±»)åº”è¯¥æ˜¯å¤§å®¶çš„å¦ä¸€ä¸ªç–‘é—®ï¼Œå®ƒæœ‰ä¸€ä¸ªæ–¹æ³•addDisposable:å¯ä»¥æ·»åŠ å¦ä¸€ä¸ªRACDisposableï¼Œå®ƒçš„æœ€ç»ˆå½¢æ€æ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æž„ï¼Œç¬¬ä¸€ä¸ªRACCompoundDisposableå­˜äº†è‹¥å¹²ä¸ªRACDisposableæˆ–è€…RACCompoundDisposableï¼Œç›¸åº”çš„RACCompoundDisposableåˆå­˜äº†è‹¥å¹²ä¸ªRACDisposableæˆ–è€…RACCompoundDisposableâ€¦æ¯ä¸ªå…ƒç´ é‡Œè¾¹å­˜çš„éƒ½æ˜¯ä¸€äº›blockå½¢å¼å­˜åœ¨çš„æ¸…ç†æ“ä½œï¼Œè¿™æ ·å½“æ‰§è¡Œæ ‘çš„æ ¹èŠ‚ç‚¹çš„disposeæ—¶ï¼Œæ•´æ£µæ ‘å°±ä¼šæŒ‰é¡ºåºæ‰§è¡Œæ¸…ç†æ“ä½œäº†ã€‚ é‚£ä¹ˆï¼Œè®²åˆ°è¿™é‡Œå°±å…ˆå‘Šä¸€æ®µè½äº†ï¼Œç­‰æœ‰æ—¶é—´æˆ‘ä¼šæŠŠRACæ›´å¤æ‚åœºæ™¯ä¸‹çš„ä½¿ç”¨æµç¨‹ä»‹ç»ç»™å¤§å®¶ã€‚ å¸Œæœ›èƒ½å¯¹æ‚¨æœ‰ä¸€ç‚¹å¸®åŠ©ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>ReactiveCocoa</tag>
        <tag>RAC</tag>
      </tags>
  </entry>
</search>
